import { TipGood, TipBad, TipInfo } from "@/components/tips";
import { Iframe } from "@/components/iframe";
import { Example } from "@/components/example";
import { Figure } from "@/components/figure";

export const title = "Тёмный режим";
export const description = "Использование вариантов для стилизации вашего сайта в тёмном режиме.";

## Обзор

Теперь, когда тёмный режим является встроенной функцией многих операционных систем, становится всё более распространённым создавать тёмную версию вашего веб-сайта вместе с дизайном по умолчанию.

Чтобы сделать это как можно проще, Tailwind включает вариант `dark`, который позволяет вам стилизовать ваш сайт по-разному, когда включён тёмный режим:

<Figure>

<Example padding={false}>
  {
    <div className="grid grid-cols-1 sm:grid-cols-2">
      <div className="p-8 pt-7">
        <p className="mb-2 text-sm font-medium text-gray-500">Светлый режим</p>
        <div className="rounded-lg bg-white px-6 py-8 shadow-xl ring ring-gray-900/5">
          <div>
            <span className="inline-flex items-center justify-center rounded-md bg-indigo-500 p-2 shadow-lg">
              <svg
                className="h-6 w-6 text-white"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth="2"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                />
              </svg>
            </span>
          </div>
          <p className="mt-5 text-base font-medium tracking-tight text-gray-900">Пишет вверх ногами</p>
          <p
            className="mt-2 text-sm text-gray-500"
            children={`Ручка Zero Gravity может использоваться для письма в любом положении,
          включая вверх ногами. Она даже работает в космосе.`}
          />
        </div>
      </div>
      <div className="bg-gray-900 p-8 pt-7">
        <p className="mb-2 text-sm font-medium text-gray-400">Тёмный режим</p>
        <div className="rounded-lg bg-gray-800 px-6 py-8 shadow-xl ring ring-gray-900/5">
          <div>
            <span className="inline-flex items-center justify-center rounded-md bg-indigo-500 p-2 shadow-lg">
              <svg
                className="h-6 w-6 text-white"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth="2"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                />
              </svg>
            </span>
          </div>
          <p className="mt-5 text-base font-medium tracking-tight text-white">Пишет вверх ногами</p>
          <p
            className="mt-2 text-sm text-gray-400"
            children={`Ручка Zero Gravity может использоваться для письма в любом положении,
          включая вверх ногами. Она даже работает в космосе.`}
          />
        </div>
      </div>
    </div>
  }
</Example>

```html
<!-- [!code word:dark\:bg-gray-800] -->
<!-- prettier-ignore -->
<div class="bg-white dark:bg-gray-800 rounded-lg px-6 py-8 ring shadow-xl ring-gray-900/5">
  <div>
    <span class="inline-flex items-center justify-center rounded-md bg-indigo-500 p-2 shadow-lg">
      <svg class="h-6 w-6 stroke-white" ...>
        <!-- ... -->
      </svg>
    </span>
  </div>
  <!-- prettier-ignore -->
  <!-- [!code word:dark\:text-white] -->
  <h3 class="text-gray-900 dark:text-white mt-5 text-base font-medium tracking-tight ">Пишет вверх ногами</h3>
  <!-- prettier-ignore -->
  <!-- [!code word:dark\:text-gray-400] -->
  <p class="text-gray-500 dark:text-gray-400 mt-2 text-sm ">
    Ручка Zero Gravity может использоваться для письма в любом положении, включая вверх ногами. Она даже работает в космосе.
  </p>
</div>
```

</Figure>

По умолчанию это использует CSS медиа-функцию `prefers-color-scheme`, но вы также можете создавать сайты, которые поддерживают [ручное переключение тёмного режима](#переключение-тёмного-режима-вручную), переопределив вариант `dark`.

## Переключение тёмного режима вручную

Если вы хотите, чтобы ваша тёмная тема управлялась CSS-селектором вместо медиа-запроса `prefers-color-scheme`, переопределите вариант `dark`, чтобы использовать ваш пользовательский селектор:

```css
/* [!code filename:app.css] */
@import "tailwindcss";

/* [!code highlight:2] */
@custom-variant dark (&:where(.dark, .dark *));
```

Теперь вместо того, чтобы утилиты `dark:*` применялись на основе `prefers-color-scheme`, они будут применяться всякий раз, когда класс `dark` присутствует ранее в HTML-дереве:

```html
<!-- [!code filename:HTML] -->
<!-- [!code word:dark\:bg-black] -->
<!-- [!code word:dark] -->
<html class="dark">
  <body>
    <div class="bg-white dark:bg-black">
      <!-- ... -->
    </div>
  </body>
</html>
```

Как вы добавляете класс `dark` к элементу `html`, зависит от вас, но распространённый подход — использовать немного JavaScript, который обновляет атрибут `class` и синхронизирует это предпочтение с чем-то вроде `localStorage`.

### Использование data-атрибута

Чтобы использовать data-атрибут вместо класса для активации тёмного режима, просто переопределите вариант `dark` с селектором атрибута:

```css
/* [!code filename:app.css] */
@import "tailwindcss";

/* [!code highlight:2] */
@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));
```

Теперь утилиты тёмного режима будут применяться всякий раз, когда атрибут `data-theme` установлен в `dark` где-то выше в дереве:

```html
<!-- [!code filename:HTML] -->
<!-- [!code word:dark\:bg-black] -->
<!-- [!code word:data-theme="dark"] -->
<html data-theme="dark">
  <body>
    <div class="bg-white dark:bg-black">
      <!-- ... -->
    </div>
  </body>
</html>
```

### С поддержкой системной темы

Чтобы создать трёхсторонние переключатели тем, которые поддерживают светлый режим, тёмный режим и вашу системную тему, используйте пользовательский селектор тёмного режима и [API `window.matchMedia()`](https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia) для обнаружения системной темы и обновления элемента `html` при необходимости.

Вот простой пример того, как вы можете поддерживать светлый режим, тёмный режим, а также уважать предпочтения операционной системы:

```js
// [!code filename:spaghetti.js]
// При загрузке страницы или при смене тем, лучше добавить встроенно в `head`, чтобы избежать FOUC
document.documentElement.classList.toggle(
  "dark",
  localStorage.theme === "dark" ||
    (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches),
);

// Всякий раз, когда пользователь явно выбирает светлый режим
localStorage.theme = "light";

// Всякий раз, когда пользователь явно выбирает тёмный режим
localStorage.theme = "dark";

// Всякий раз, когда пользователь явно выбирает уважать предпочтения ОС
localStorage.removeItem("theme");
```

Опять же, вы можете управлять этим как вам угодно, даже сохраняя предпочтение на стороне сервера в базе данных и рендеря класс на сервере — это полностью зависит от вас.
