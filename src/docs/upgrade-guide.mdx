export const title = "Руководство по обновлению";
export const description = "Обновление ваших проектов Tailwind CSS с версии v3 до v4.";

Tailwind CSS v4.0 — это новая мажорная версия фреймворка, и хотя мы приложили много усилий, чтобы минимизировать критические изменения, некоторые обновления необходимы. Это руководство описывает все шаги, необходимые для обновления ваших проектов с v3 до v4.

Чтобы упростить процесс, мы разработали инструмент для миграции, который может автоматически выполнить большую часть этих изменений для типичных проектов.

### Использование инструмента обновления

Если вы хотите попробовать обновить проект с v3 до v4, вы можете использовать наш инструмент обновления, который выполнит большую часть работы за вас:

```sh
  # [!code filename:Terminal]
$ npx @tailwindcss/upgrade
```

Для большинства проектов инструмент обновления автоматизирует весь процесс миграции, включая обновление зависимостей, перенос вашего конфигурационного файла в CSS и обработку изменений в ваших шаблонных файлах.

Инструмент обновления требует Node.js 20 или выше, поэтому убедитесь, что ваша среда обновлена перед его запуском.

**Мы рекомендуем запускать инструмент обновления в новой ветке**, а затем внимательно просмотреть изменения и протестировать ваш проект в браузере, чтобы убедиться, что все изменения выглядят корректно. В сложных проектах вам, возможно, придется вручную подправить несколько вещей, но в любом случае инструмент сэкономит вам массу времени.

Также рекомендуется ознакомиться со всеми [критическими изменениями](#changes-from-v3) в v4 и хорошо понять, что изменилось, на случай, если в вашем проекте есть другие вещи, которые нужно обновить, и которые инструмент обновления не смог обнаружить.

## Обновление вручную

### Использование PostCSS

В v3 пакет  `tailwindcss` был плагином PostCSS, но в v4 плагин PostCSS находится в отдельном пакете `@tailwindcss/postcss`.

Кроме того, в v4 импорты и добавление вендорных префиксов теперь выполняются автоматически, поэтому вы можете удалить `postcss-import` и `autoprefixer`, если они есть в вашем проекте:

```js
// [!code filename:postcss.config.mjs]
export default {
  plugins: {
    // [!code --:4]
    "postcss-import": {},
    tailwindcss: {},
    autoprefixer: {},
    // [!code ++:2]
    "@tailwindcss/postcss": {},
  },
};
```

### Использование Vite

Если вы используете Vite, мы рекомендуем перейти с PostCSS-плагина на наш новый специализированный плагин для Vite, чтобы улучшить производительность и получить лучший опыт разработки:

```ts
// [!code filename:vite.config.ts]
import { defineConfig } from "vite";
// [!code highlight:2]
import tailwindcss from "@tailwindcss/vite";

export default defineConfig({
  plugins: [
    // [!code highlight:2]
    tailwindcss(),
  ],
});
```

### Использование Tailwind CLI

В v4 Tailwind CLI находится в отдельном пакете `@tailwindcss/cli`. Обновите ваши команды сборки, чтобы использовать новый пакет:

```sh
/* [!code filename:Terminal] */
  # [!code --:2]
npx tailwindcss -i input.css -o output.css
  # [!code ++:2]
npx @tailwindcss/cli -i input.css -o output.css
```

## Изменения в v3

Вот полный список всех критических изменений в Tailwind CSS v4.0.

Наш [инструмент обновления](##using-the-upgrade-tool) автоматически выполнит большую часть этих изменений, поэтому мы настоятельно рекомендуем использовать его, если это возможно.

### Удалены директивы @tailwind

В v4 вы импортируете Tailwind с помощью обычного CSS-выражения `@import`, а не с помощью директив `@tailwind`, которые использовались в v3:

```css
/* [!code filename:CSS] */
/* [!code --:4] */
@tailwind base;
@tailwind components;
@tailwind utilities;
/* [!code ++:2] */
@import "tailwindcss";
```

### Удалены устаревшие утилиты

Мы удалили все утилиты, которые были устаревшими в v3 и не документировались в течение нескольких лет. Вот список того, что было удалено, вместе с современными альтернативами:

{

<table>
  <thead>
    <tr>
      <th>Устаревшее</th>
      <th>Замена</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code className="whitespace-nowrap">bg-opacity-*</code>
      </td>
      <td>
        Используйте модификаторы прозрачности, например <code className="whitespace-nowrap">bg-black/50</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">text-opacity-*</code>
      </td>
      <td>
        Используйте модификаторы прозрачности, например <code className="whitespace-nowrap">text-black/50</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">border-opacity-*</code>
      </td>
      <td>
        Используйте модификаторы прозрачности, например <code className="whitespace-nowrap">border-black/50</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">divide-opacity-*</code>
      </td>
      <td>
        Используйте модификаторы прозрачности, например <code className="whitespace-nowrap">divide-black/50</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">ring-opacity-*</code>
      </td>
      <td>
        Используйте модификаторы прозрачности, например <code className="whitespace-nowrap">ring-black/50</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">placeholder-opacity-*</code>
      </td>
      <td>
        Используйте модификаторы прозрачности, например <code className="whitespace-nowrap">placeholder-black/50</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">flex-shrink-*</code>
      </td>
      <td>
        <code className="whitespace-nowrap">shrink-*</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">flex-grow-*</code>
      </td>
      <td>
        <code className="whitespace-nowrap">grow-*</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">overflow-ellipsis</code>
      </td>
      <td>
        <code className="whitespace-nowrap">text-ellipsis</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">decoration-slice</code>
      </td>
      <td>
        <code className="whitespace-nowrap">box-decoration-slice</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">decoration-clone</code>
      </td>
      <td>
        <code className="whitespace-nowrap">box-decoration-clone</code>
      </td>
    </tr>
  </tbody>
</table>

}

### Переименованные утилиты

Мы переименовали следующие утилиты в v4, чтобы сделать их более согласованными и предсказуемыми:

{

<table>
  <thead>
    <tr>
      <th>v3</th>
      <th>v4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code className="whitespace-nowrap">shadow-sm</code>
      </td>
      <td>
        <code className="whitespace-nowrap">shadow-xs</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">shadow</code>
      </td>
      <td>
        <code className="whitespace-nowrap">shadow-sm</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">drop-shadow-sm</code>
      </td>
      <td>
        <code className="whitespace-nowrap">drop-shadow-xs</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">drop-shadow</code>
      </td>
      <td>
        <code className="whitespace-nowrap">drop-shadow-sm</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">blur-sm</code>
      </td>
      <td>
        <code className="whitespace-nowrap">blur-xs</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">blur</code>
      </td>
      <td>
        <code className="whitespace-nowrap">blur-sm</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">backdrop-blur-sm</code>
      </td>
      <td>
        <code className="whitespace-nowrap">backdrop-blur-xs</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">backdrop-blur</code>
      </td>
      <td>
        <code className="whitespace-nowrap">backdrop-blur-sm</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">rounded-sm</code>
      </td>
      <td>
        <code className="whitespace-nowrap">rounded-xs</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">rounded</code>
      </td>
      <td>
        <code className="whitespace-nowrap">rounded-sm</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">outline-none</code>
      </td>
      <td>
        <code className="whitespace-nowrap">outline-hidden</code>
      </td>
    </tr>
    <tr>
      <td>
        <code className="whitespace-nowrap">ring</code>
      </td>
      <td>
        <code className="whitespace-nowrap">ring-3</code>
      </td>
    </tr>
  </tbody>
</table>

}

#### Обновленные шкалы для теней, радиусов и размытия

Мы переименовали стандартные шкалы для теней, радиусов и размытия, чтобы каждая утилита имела именованное значение. Версии без суффиксов по-прежнему работают для обратной совместимости, но утилиты вида <code><em>{'<utility>'}</em>-sm</code> будут выглядеть иначе, если не обновить их до соответствующих версий <code><em>{'<utility>'}</em>-xs</code>.

Чтобы обновить ваш проект в соответствии с этими изменениями, замените все утилиты v3 на их версии для v4:

```html
<!-- [!code filename:HTML] -->
<!-- [!code --:2] -->
<input class="shadow-sm" />
<!-- [!code ++:2] -->
<input class="shadow-xs" />

<!-- [!code --:2] -->
<input class="shadow" />
<!-- [!code ++:2] -->
<input class="shadow-sm" />
```

#### Переименованная утилита outline

Утилита `outline-none` ранее не устанавливала `outline-style: none`, а вместо этого задавала невидимый контур, который все равно отображался в режиме принудительных цветов для обеспечения доступности.

Чтобы сделать это более понятным, мы переименовали эту утилиту в `outline-hidden` и добавили новую утилиту `outline-none`, которая действительно устанавливает `outline-style: none`.

Чтобы обновить ваш проект в соответствии с этим изменением, замените все использования `outline-none` на `outline-hidden`:

```html
<!-- [!code filename:HTML] -->
<!-- [!code --:2] -->
<input class="focus:outline-none" />
<!-- [!code ++:2] -->
<input class="focus:outline-hidden" />
```

#### Изменение ширины кольца по умолчанию

В v3 утилита `ring` добавляла кольцо шириной `3px`. В v4 мы изменили это значение на `1px`, чтобы сделать его согласованным с границами и контурами.

Чтобы обновить ваш проект в соответствии с этим изменением, замените все использования `ring` на `ring-3`:

```html
<!-- [!code filename:HTML] -->
<!-- [!code --:2] -->
<input class="ring ring-blue-500" />
<!-- [!code ++:2] -->
<input class="ring-3 ring-blue-500" />
```

### Селектор пространства между элементами

Мы изменили селектор, используемый утилитами [`space-x-*` и `space-y-*`](/docs/margin#adding-space-between-children), чтобы решить серьезные проблемы с производительностью на больших страницах:

```css
/* [!code filename:CSS] */
/* Before */
.space-y-4 > :not([hidden]) ~ :not([hidden]) {
  margin-top: 1rem;
}

/* Now */
.space-y-4 > :not(:last-child) {
  margin-bottom: 1rem;
}
```

Вы можете заметить изменения в вашем проекте, если когда-либо использовали эти утилиты со встроенными элементами или если добавляли другие отступы к дочерним элементам для настройки их интервалов.

Если это изменение вызывает проблемы в вашем проекте, мы рекомендуем перейти на flex или grid макет и использовать `gap`:

{/* prettier-ignore */}
```html
<!-- [!code filename:HTML] -->
<div class="space-y-4 p-4"> <!-- [!code --] -->
<div class="flex flex-col gap-4 p-4"> <!-- [!code ++] -->
  <label for="name">Name</label>
  <input type="text" name="name" />
</div>
```

### Использование вариантов с градиентами

В v3 переопределение части градиента с помощью варианта "сбрасывало" весь градиент, поэтому в этом примере цвет `to-*` становился прозрачным в темном режиме вместо желтого:

```html
<!-- [!code filename:HTML] -->
<!-- [!code classes:dark:from-blue-500] -->
<div class="bg-gradient-to-r from-red-500 to-yellow-400 dark:from-blue-500">
  <!-- ... -->
</div>
```

В v4 эти значения сохраняются, что более согласуется с тем, как работают другие утилиты в Tailwind.

Это означает, что вам может потребоваться явно использовать `via-none`, если вы хотите "сбросить" трехточечный градиент обратно в двухточечный в определенном состоянии:

```html
<!-- [!code filename:HTML] -->
<!-- [!code classes:dark:via-none] -->
<div class="bg-linear-to-r from-red-500 via-orange-400 to-yellow-400 dark:via-none dark:from-blue-500 dark:to-teal-400">
  <!-- ... -->
</div>
```

### Конфигурация контейнера

В v3 утилита `container` имела несколько параметров конфигурации, таких как `center` и `padding`, которые больше не существуют в v4.

Чтобы настроить утилиту `container` в v4, расширьте её с помощью директивы `@utility`:

```css
/* [!code filename:CSS] */
@utility container {
  margin-inline: auto;
  padding-inline: 2rem;
}
```

### Цвет границы по умолчанию

В v3 утилиты `border-*` и `divide-*` по умолчанию использовали настроенный вами цвет `gray-200`. В v4 мы изменили это на `currentColor`, чтобы сделать Tailwind менее навязчивым и соответствовать стандартам браузеров.

Чтобы обновить ваш проект в соответствии с этим изменением, убедитесь, что вы указываете цвет везде, где используете утилиты `border-*` или `divide-*`:

```html
<!-- [!code classes:border-gray-200] -->
<div class="border border-gray-200 px-2 py-3 ...">
  <!-- ... -->
</div>
```

Альтернативно, добавьте эти базовые стили в ваш проект, чтобы сохранить поведение v3:

```css
/* [!code filename:CSS] */
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
}
```

### Ширина и цвет кольца по умолчанию

Мы изменили ширину утилиты `ring` с 3px на 1px и изменили цвет по умолчанию с `blue-500` на `currentColor`, чтобы сделать её более согласованной с утилитами `border-*`, `divide-*` и `outline-*`.

Чтобы обновить ваш проект в соответствии с этими изменениями, замените все использования `ring` на `ring-3`:

```html
<!-- prettier-ignore -->
<button class="focus:ring ..."> <!-- [!code --] -->
<button class="focus:ring-3 ..."> <!-- [!code ++] -->
  <!-- ... -->
</button>
```

Затем убедитесь, что вы добавляете `ring-blue-500` везде, где полагались на цвет кольца по умолчанию:

```html
<!-- [!code classes:focus:ring-blue-500] -->
<button class="focus:ring-3 focus:ring-blue-500 ...">
  <!-- ... -->
</button>
```

Альтернативно, добавьте эти переменные темы в ваш CSS, чтобы сохранить поведение v3:

```css
/* [!code filename:CSS] */
@theme {
  --default-ring-width: 3px;
  --default-ring-color: var(--color-blue-500);
}
```

Однако обратите внимание, что эти переменные поддерживаются только для совместимости и не считаются идиоматичным использованием Tailwind CSS v4.0.

### Изменения в Preflight

Мы внесли несколько небольших изменений в базовые стили в Preflight в v4:

#### Новый цвет плейсхолдера по умолчанию

В v3 текст плейсхолдера по умолчанию использовал настроенный вами цвет `gray-400`. В v4 мы упростили это, чтобы использовать текущий цвет текста с 50% прозрачностью.

Вы, вероятно, даже не заметите это изменение (оно может даже улучшить внешний вид вашего проекта), но если вы хотите сохранить поведение v3, добавьте этот CSS в ваш проект:

```css
/* [!code filename:CSS] */
@layer base {
  input::placeholder,
  textarea::placeholder {
    color: var(--color-gray-400);
  }
}
```

#### Кнопки используют курсор по умолчанию

Теперь кнопки используют `cursor: default` вместо `cursor: pointer`, чтобы соответствовать поведению браузера по умолчанию.

Если вы хотите продолжить использовать `cursor: pointer` по умолчанию, добавьте эти базовые стили в ваш CSS:

```css
/* [!code filename:CSS] */
@layer base {
  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }
}
```

#### Отступы диалогов удалены

Теперь Preflight сбрасывает отступы для элементов `<dialog>`, чтобы обеспечить согласованность с тем, как сбрасываются другие элементы.

Если вы хотите, чтобы диалоги по-прежнему центрировались по умолчанию, добавьте этот CSS в ваш проект:

```css
/* [!code filename:CSS] */
@layer base {
  dialog {
    margin: auto;
  }
}
```

### Использование префикса

Теперь префиксы выглядят как варианты и всегда находятся в начале имени класса:

```html
<!-- [!code classes:tw:bg-red-500,tw:flex,tw:hover:bg-red-600] -->
<div class="tw:flex tw:bg-red-500 tw:hover:bg-red-600">
  <!-- ... -->
</div>
```

При использовании префикса вы по-прежнему должны настраивать переменные темы так, как если бы вы не использовали префикс:

```css {{ filename: "app.css" }}
@import "tailwindcss" prefix(tw);

@theme {
  --font-display: "Satoshi", "sans-serif";

  --breakpoint-3xl: 120rem;

  --color-avocado-100: oklch(0.99 0 0);
  --color-avocado-200: oklch(0.98 0.04 113.22);
  --color-avocado-300: oklch(0.94 0.11 115.03);

  /* ... */
}
```

Сгенерированные CSS-переменные _будут_ включать префикс, чтобы избежать конфликтов с любыми существующими переменными в вашем проекте:

```css {{ filename: "dist.css" }}
:root {
  --tw-font-display: "Satoshi", "sans-serif";

  --tw-breakpoint-3xl: 120rem;

  --tw-color-avocado-100: oklch(0.99 0 0);
  --tw-color-avocado-200: oklch(0.98 0.04 113.22);
  --tw-color-avocado-300: oklch(0.94 0.11 115.03);

  /* ... */
}
```

### Добавление пользовательских утилит

В версии 3 любые пользовательские классы, которые вы определили в `@layer utilities` или `@layer components, Tailwind воспринимал бы как настоящий служебный класс и автоматически работал бы с такими вариантами, как `hover`, `focus` или `lg`, с той разницей, что `@layer components` всегда был бы первым в сгенерированной таблице стилей.

В v4 мы используем нативные каскадные слои и больше не перехватываем правило `@layer`, поэтому мы представили API `@utility` в качестве замены:

```css
/* [!code filename:CSS] */
/* [!code --:6] */
@layer utilities {
  .tab-4 {
    tab-size: 4;
  }
}
/* [!code ++:4] */
@utility tab-4 {
  tab-size: 4;
}
```

Пользовательские утилиты теперь также сортируются на основе количества определяемых ими свойств. Это означает, что такие компонентные утилиты, как `.btn`, могут быть перезаписаны другими утилитами Tailwind без дополнительной настройки:

```css
/* [!code filename:CSS] */
/* [!code --:8] */
@layer components {
  .btn {
    border-radius: 0.5rem;
    padding: 0.5rem 1rem;
    background-color: ButtonFace;
  }
}
/* [!code ++:6] */
@utility btn {
  border-radius: 0.5rem;
  padding: 0.5rem 1rem;
  background-color: ButtonFace;
}
```

Подробнее о регистрации пользовательских утилит читайте в [документации по добавлению пользовательских утилит](/docs/adding-custom-styles#adding-custom-utilities).

### Порядок наложения вариантов

В v3 сложенные варианты применялись справа налево, но в v4 мы обновили их, чтобы они применялись слева направо, чтобы они больше походили на синтаксис CSS.

Чтобы обновить ваш проект в соответствии с этим изменением, измените порядок любых чувствительных к порядку сложенных вариантов в вашем проекте:

```html
<!-- [!code filename:HTML] -->
<!-- [!code --:2] -->
<!-- prettier-ignore -->
<ul class="py-4 first:*:pt-0 last:*:pb-0">
<!-- [!code ++:2] -->
<ul class="py-4 *:first:pt-0 *:last:pb-0">
  <li>One</li>
  <li>Two</li>
  <li>Three</li>
</ul>
```

Скорее всего, у вас их очень мало, если они вообще есть — варианты прямого дочернего элемента (`*`) и любые варианты плагинов типографики (`prose-headings`) являются наиболее вероятными, которые вы можете использовать, и даже тогда только если вы сложили их с другими вариантами.

### Переменные в произвольных значениях

В v3 вы могли использовать CSS-переменные как произвольные значения без `var()`, но последние обновления CSS означают, что это часто может быть неоднозначным, поэтому мы изменили синтаксис для этого в v4, чтобы использовать круглые скобки вместо квадратных.

Чтобы обновить ваш проект в соответствии с этим изменением, замените использование старого сокращенного синтаксиса переменных на новый сокращенный синтаксис переменных:

```html
<!-- [!code filename:HTML] -->
<!-- [!code --:2] -->
<div class="bg-[--brand-color]"></div>
<!-- [!code ++:2] -->
<div class="bg-(--brand-color)"></div>
```

### Стили наведения на мобильных устройствах

В v4 мы обновили вариант `hover`, чтобы он применялся только тогда, когда основное устройство ввода поддерживает наведение:

```css
/* [!code filename:CSS] */
@media (hover: hover) {
  .hover\:underline:hover {
    text-decoration: underline;
  }
}
```

Это может создать проблемы, если вы создали свой сайт таким образом, что он зависит от срабатывания наведения при касании на сенсорных устройствах. Если это проблема для вас, вы можете переопределить вариант `hover` с помощью собственного варианта, который использует старую реализацию:

```css
/* [!code filename:CSS] */
@custom-variant hover (&:hover);
```

Однако в целом мы рекомендуем рассматривать функциональность наведения как улучшение и не зависеть от неё для работы вашего сайта, поскольку сенсорные устройства не имеют возможности наведения.

### Переход outline-color

Утилиты `transition` и `transition-color` теперь включают свойство `outline-color`.

Это означает, что если вы добавляли контур с пользовательским цветом в фокусе, вы увидите переход цвета от цвета по умолчанию. Чтобы избежать этого, убедитесь, что вы задали цвет контура безусловно или явно задали его для обоих состояний:

```html
<!-- [!code filename:HTML] -->
<!-- [!code --:2] -->
<button class="transition hover:outline-2 hover:outline-cyan-500"></button>
<!-- [!code ++:2] -->
<button class="outline-cyan-500 transition hover:outline-2"></button>
```

### Отключение основных плагинов

В v3 была опция `corePlugins`, которую можно было использовать для полного отключения определенных утилит в фреймворке. В v4 это больше не поддерживается.

### Использование функции theme()

Поскольку v4 включает CSS-переменные для всех значений вашей темы, мы рекомендуем использовать эти переменные вместо функции `theme()` везде, где это возможно:

```css
/* [!code filename:CSS] */
.my-class {
  /* [!code --:2] */
  background-color: theme(colors.red.500);
  /* [!code ++:2] */
  background-color: var(--color-red-500);
}
```

Для случаев, когда вам все еще нужно использовать функцию `theme()` (например, в медиазапросах, где CSS-переменные не поддерживаются), вы должны использовать имя CSS-переменной вместо старой точечной нотации:

```css
/* [!code filename:CSS] */
@media (width >= theme(screens.xl)) { /* [!code --] */
@media (width >= theme(--breakpoint-xl)) { /* [!code ++] */
  /* ... */
}
```

### Использование конфигурационного файла на JavaScript

Конфигурационные файлы на JavaScript по-прежнему поддерживаются для обратной совместимости, но в v4 они больше не обнаруживаются автоматически.

Если вам все еще нужно использовать конфигурационный файл на JavaScript, вы можете загрузить его явно с помощью директивы `@config`:

```css
/* [!code filename:CSS] */
@config "../../tailwind.config.js";
```

The `corePlugins`, `safelist`, and `separator` options from the JavaScript-based config are not supported in v4.0.

### Значения темы в JavaScript

В v3 мы экспортировали функцию `resolveConfig` , которую вы могли использовать для преобразования вашей конфигурации на основе JavaScript в плоский объект, который можно использовать в другом JavaScript.

Мы удалили это в v4 в надежде, что люди смогут использовать генерируемые нами CSS-переменные напрямую, что намного проще и значительно уменьшит размер вашего бандла.

Например, популярная библиотека [Motion](https://motion.dev/docs/react-quick-start) для React позволяет анимировать значения CSS-переменных:

```jsx
// [!code filename:JSX]
// [!code word:var(--color-blue-500)]
<motion.div animate={{ backgroundColor: "var(--color-blue-500)" }} />
```

Если вам нужен доступ к значению CSS-переменной в JS, вы можете использовать `getComputedStyle`, чтобы получить значение переменной темы в корневом элементе документа:

```js
// [!code filename:spaghetti.js]
let styles = getComputedStyle(document.documentElement);
let shadow = styles.getPropertyValue("--shadow-xl");
```

### Использование  @apply с Vue, Svelte или CSS-модулями

В v4 таблицы стилей, которые объединяются отдельно от вашего основного CSS-файла (например, файлы CSS-модулей, блоки `<style>` в Vue, Svelte или Astro и т.д.), не имеют доступа к переменным темы, пользовательским утилитам и пользовательским вариантам, определенным в других файлах.

Чтобы сделать эти определения доступными в этих контекстах, используйте [`@reference`](/docs/functions-and-directives#reference-directive) для их импорта без дублирования CSS в вашем бандле:

```html
<!-- [!code filename:Vue] -->
<template>
  <h1>Hello world!</h1>
</template>

<style>
  /* [!code highlight:2] */
  @reference "../../app.css";

  h1 {
    @apply text-2xl font-bold text-red-500;
  }
</style>
```

Альтернативно, вы можете использовать ваши CSS-переменные темы напрямую вместо использования `@apply`, что также улучшит производительность, поскольку Tailwind не нужно будет обрабатывать эти стили:

```html
<!-- [!code filename:Vue] -->
<template>
  <h1>Hello world!</h1>
</template>

<style>
  h1 {
    /* [!code highlight:2] */
    color: var(--text-red-500);
  }
</style>
```

Вы можете найти больше документации по [использованию Tailwind с CSS-модулями](/docs/compatibility#css-modules).
