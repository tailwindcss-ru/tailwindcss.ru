---
section: Предварительная документация
title: Tailwind CSS v4.0 Beta
description: Ознакомьтесь с тем, что появится в следующей версии Tailwind CSS.
---

import { Heading } from '@/components/Heading'
import { TipGood, TipBad } from '@/components/Tip'
import { ClassTable } from '@/components/ClassTable'

export function ColorPalette() {
  const colors = {
    red: {
      '50': 'oklch(0.971 0.013 17.38)',
      '100': 'oklch(0.936 0.032 17.717)',
      '200': 'oklch(0.885 0.062 18.334)',
      '300': 'oklch(0.808 0.114 19.571)',
      '400': 'oklch(0.704 0.191 22.216)',
      '500': 'oklch(0.637 0.237 25.331)',
      '600': 'oklch(0.577 0.245 27.325)',
      '700': 'oklch(0.505 0.213 27.518)',
      '800': 'oklch(0.444 0.177 26.899)',
      '900': 'oklch(0.396 0.141 25.723)',
      '950': 'oklch(0.258 0.092 26.042)',
    },
    orange: {

      '50': 'oklch(0.98 0.016 73.684)',
      '100': 'oklch(0.954 0.038 75.164)',
      '200': 'oklch(0.901 0.076 70.697)',
      '300': 'oklch(0.837 0.128 66.29)',
      '400': 'oklch(0.75 0.183 55.934)',
      '500': 'oklch(0.705 0.213 47.604)',
      '600': 'oklch(0.646 0.222 41.116)',
      '700': 'oklch(0.553 0.195 38.402)',
      '800': 'oklch(0.47 0.157 37.304)',
      '900': 'oklch(0.408 0.123 38.172)',
      '950': 'oklch(0.266 0.079 36.259)',
    },
    amber: {
      '50': 'oklch(0.987 0.022 95.277)',
      '100': 'oklch(0.962 0.059 95.617)',
      '200': 'oklch(0.924 0.12 95.746)',
      '300': 'oklch(0.879 0.169 91.605)',
      '400': 'oklch(0.828 0.189 84.429)',
      '500': 'oklch(0.769 0.188 70.08)',
      '600': 'oklch(0.666 0.179 58.318)',
      '700': 'oklch(0.555 0.163 48.998)',
      '800': 'oklch(0.473 0.137 46.201)',
      '900': 'oklch(0.414 0.112 45.904)',
      '950': 'oklch(0.279 0.077 45.635)',
    },
    yellow: {
      "50": 'oklch(0.987 0.026 102.212)',
      "100": 'oklch(0.973 0.071 103.193)',
      "200": 'oklch(0.945 0.129 101.54)',
      "300": 'oklch(0.905 0.182 98.111)',
      "400": 'oklch(0.852 0.199 91.936)',
      "500": 'oklch(0.795 0.184 86.047)',
      "600": 'oklch(0.681 0.162 75.834)',
      "700": 'oklch(0.554 0.135 66.442)',
      "800": 'oklch(0.476 0.114 61.907)',
      "900": 'oklch(0.421 0.095 57.708)',
      "950": 'oklch(0.286 0.066 53.813)',
    },


    'lime': {

      '50': 'oklch(0.986 0.031 120.757)',
      '100': 'oklch(0.967 0.067 122.328)',
      '200': 'oklch(0.938 0.127 124.321)',
      '300': 'oklch(0.897 0.196 126.665)',
      '400': 'oklch(0.841 0.238 128.85)',
      '500': 'oklch(0.768 0.233 130.85)',
      '600': 'oklch(0.648 0.2 131.684)',
      '700': 'oklch(0.532 0.157 131.589)',
      '800': 'oklch(0.453 0.124 130.933)',
      '900': 'oklch(0.405 0.101 131.063)',
      '950': 'oklch(0.274 0.072 132.109)',
    },

    'green': {

      '50': 'oklch(0.982 0.018 155.826)',
      '100': 'oklch(0.962 0.044 156.743)',
      '200': 'oklch(0.925 0.084 155.995)',
      '300': 'oklch(0.871 0.15 154.449)',
      '400': 'oklch(0.792 0.209 151.711)',
      '500': 'oklch(0.723 0.219 149.579)',
      '600': 'oklch(0.627 0.194 149.214)',
      '700': 'oklch(0.527 0.154 150.069)',
      '800': 'oklch(0.448 0.119 151.328)',
      '900': 'oklch(0.393 0.095 152.535)',
      '950': 'oklch(0.266 0.065 152.934)',
    },

    'emerald': {

      '50': 'oklch(0.979 0.021 166.113)',
      '100': 'oklch(0.95 0.052 163.051)',
      '200': 'oklch(0.905 0.093 164.15)',
      '300': 'oklch(0.845 0.143 164.978)',
      '400': 'oklch(0.765 0.177 163.223)',
      '500': 'oklch(0.696 0.17 162.48)',
      '600': 'oklch(0.596 0.145 163.225)',
      '700': 'oklch(0.508 0.118 165.612)',
      '800': 'oklch(0.432 0.095 166.913)',
      '900': 'oklch(0.378 0.077 168.94)',
      '950': 'oklch(0.262 0.051 172.552)',
    },

    'teal': {

      '50': 'oklch(0.984 0.014 180.72)',
      '100': 'oklch(0.953 0.051 180.801)',
      '200': 'oklch(0.91 0.096 180.426)',
      '300': 'oklch(0.855 0.138 181.071)',
      '400': 'oklch(0.777 0.152 181.912)',
      '500': 'oklch(0.704 0.14 182.503)',
      '600': 'oklch(0.6 0.118 184.704)',
      '700': 'oklch(0.511 0.096 186.391)',
      '800': 'oklch(0.437 0.078 188.216)',
      '900': 'oklch(0.386 0.063 188.416)',
      '950': 'oklch(0.277 0.046 192.524)',
    },

    'cyan': {

      '50': 'oklch(0.984 0.019 200.873)',
      '100': 'oklch(0.956 0.045 203.388)',
      '200': 'oklch(0.917 0.08 205.041)',
      '300': 'oklch(0.865 0.127 207.078)',
      '400': 'oklch(0.789 0.154 211.53)',
      '500': 'oklch(0.715 0.143 215.221)',
      '600': 'oklch(0.609 0.126 221.723)',
      '700': 'oklch(0.52 0.105 223.128)',
      '800': 'oklch(0.45 0.085 224.283)',
      '900': 'oklch(0.398 0.07 227.392)',
      '950': 'oklch(0.302 0.056 229.695)',
    },

    'sky': {

      '50': 'oklch(0.977 0.013 236.62)',
      '100': 'oklch(0.951 0.026 236.824)',
      '200': 'oklch(0.901 0.058 230.902)',
      '300': 'oklch(0.828 0.111 230.318)',
      '400': 'oklch(0.746 0.16 232.661)',
      '500': 'oklch(0.685 0.169 237.323)',
      '600': 'oklch(0.588 0.158 241.966)',
      '700': 'oklch(0.5 0.134 242.749)',
      '800': 'oklch(0.443 0.11 240.79)',
      '900': 'oklch(0.391 0.09 240.876)',
      '950': 'oklch(0.293 0.066 243.157)',
    },

    'blue': {

      '50': 'oklch(0.97 0.014 254.604)',
      '100': 'oklch(0.932 0.032 255.585)',
      '200': 'oklch(0.882 0.059 254.128)',
      '300': 'oklch(0.809 0.105 251.813)',
      '400': 'oklch(0.707 0.165 254.624)',
      '500': 'oklch(0.623 0.214 259.815)',
      '600': 'oklch(0.546 0.245 262.881)',
      '700': 'oklch(0.488 0.243 264.376)',
      '800': 'oklch(0.424 0.199 265.638)',
      '900': 'oklch(0.379 0.146 265.522)',
      '950': 'oklch(0.282 0.091 267.935)',
    },

    'indigo': {

      '50': 'oklch(0.962 0.018 272.314)',
      '100': 'oklch(0.93 0.034 272.788)',
      '200': 'oklch(0.87 0.065 274.039)',
      '300': 'oklch(0.785 0.115 274.713)',
      '400': 'oklch(0.673 0.182 276.935)',
      '500': 'oklch(0.585 0.233 277.117)',
      '600': 'oklch(0.511 0.262 276.966)',
      '700': 'oklch(0.457 0.24 277.023)',
      '800': 'oklch(0.398 0.195 277.366)',
      '900': 'oklch(0.359 0.144 278.697)',
      '950': 'oklch(0.257 0.09 281.288)',
    },

    'violet': {

      '50': 'oklch(0.969 0.016 293.756)',
      '100': 'oklch(0.943 0.029 294.588)',
      '200': 'oklch(0.894 0.057 293.283)',
      '300': 'oklch(0.811 0.111 293.571)',
      '400': 'oklch(0.702 0.183 293.541)',
      '500': 'oklch(0.606 0.25 292.717)',
      '600': 'oklch(0.541 0.281 293.009)',
      '700': 'oklch(0.491 0.27 292.581)',
      '800': 'oklch(0.432 0.232 292.759)',
      '900': 'oklch(0.38 0.189 293.745)',
      '950': 'oklch(0.283 0.141 291.089)',
    },

    'purple': {

      '50': 'oklch(0.977 0.014 308.299)',
      '100': 'oklch(0.946 0.033 307.174)',
      '200': 'oklch(0.902 0.063 306.703)',
      '300': 'oklch(0.827 0.119 306.383)',
      '400': 'oklch(0.714 0.203 305.504)',
      '500': 'oklch(0.627 0.265 303.9)',
      '600': 'oklch(0.558 0.288 302.321)',
      '700': 'oklch(0.496 0.265 301.924)',
      '800': 'oklch(0.438 0.218 303.724)',
      '900': 'oklch(0.381 0.176 304.987)',
      '950': 'oklch(0.291 0.149 302.717)',
    },

    'fuchsia': {

      '50': 'oklch(0.977 0.017 320.058)',
      '100': 'oklch(0.952 0.037 318.852)',
      '200': 'oklch(0.903 0.076 319.62)',
      '300': 'oklch(0.833 0.145 321.434)',
      '400': 'oklch(0.74 0.238 322.16)',
      '500': 'oklch(0.667 0.295 322.15)',
      '600': 'oklch(0.591 0.293 322.896)',
      '700': 'oklch(0.518 0.253 323.949)',
      '800': 'oklch(0.452 0.211 324.591)',
      '900': 'oklch(0.401 0.17 325.612)',
      '950': 'oklch(0.293 0.136 325.661)',
    },

    'pink': {

      '50': 'oklch(0.971 0.014 343.198)',
      '100': 'oklch(0.948 0.028 342.258)',
      '200': 'oklch(0.899 0.061 343.231)',
      '300': 'oklch(0.823 0.12 346.018)',
      '400': 'oklch(0.718 0.202 349.761)',
      '500': 'oklch(0.656 0.241 354.308)',
      '600': 'oklch(0.592 0.249 0.584)',
      '700': 'oklch(0.525 0.223 3.958)',
      '800': 'oklch(0.459 0.187 3.815)',
      '900': 'oklch(0.408 0.153 2.432)',
      '950': 'oklch(0.284 0.109 3.907)',
    },

    'rose': {

      '50': 'oklch(0.969 0.015 12.422)',
      '100': 'oklch(0.941 0.03 12.58)',
      '200': 'oklch(0.892 0.058 10.001)',
      '300': 'oklch(0.81 0.117 11.638)',
      '400': 'oklch(0.712 0.194 13.428)',
      '500': 'oklch(0.645 0.246 16.439)',
      '600': 'oklch(0.586 0.253 17.585)',
      '700': 'oklch(0.514 0.222 16.935)',
      '800': 'oklch(0.455 0.188 13.697)',
      '900': 'oklch(0.41 0.159 10.272)',
      '950': 'oklch(0.271 0.105 12.094)',
    }
  }

  return <div className="grid grid-cols-[repeat(17,minmax(0,1fr))] gap-1 md:gap-2">
    {
      Object.entries(colors).map(([color, values]) =>
        <div className="grid grid-cols-1 gap-2" key={color}>
          {Object.values(values).map((value, i) =>
            <div className="aspect-square rounded" key={i} style={{ backgroundColor: value }} />
          )}
        </div>
      )
    }
  </div>
}


После длительного периода альфа-тестирования мы с нетерпением ждем возможности наконец-то перевести Tailwind CSS v4.0 в бета-версию!

Определенно есть некоторые шероховатости и вещи, которые мы хотим улучшить, но мы уверены, что не будем вносить больше критических изменений до стабильного релиза.

Эта документация находится в стадии разработки, и мы продолжим улучшать ее в течение периода бета-тестирования, но ее должно быть достаточно, чтобы вы могли приступить к работе.

Если у вас возникнут какие-либо затруднения, [дайте нам знать на GitHub](https://github.com/tailwindlabs/tailwindcss/) , чтобы мы могли подготовить ее к стабильному релизу через пару месяцев.

---

## Начало работы

### Установка с помощью Vite

Если вы используете Vite или фреймворк на базе Vite, например SvelteKit или Remix, установите Tailwind вместе с нашим новым специальным плагином Vite:

```bash {{ filename: 'Terminal' }}
$ npm install tailwindcss@next @tailwindcss/vite@next
```

Далее добавьте наш плагин Vite в ваш файл `vite.config.ts`:

```ts {{ filename: 'vite.config.ts' }}
  import { defineConfig } from 'vite';
> import tailwindcss from '@tailwindcss/vite';

  export default defineConfig({
    plugins: [
>     tailwindcss()
    ],
  });
```

Наконец, импортируйте Tailwind в ваш основной файл CSS:

```css  {{ filename: 'src/index.css' }}
> @import "tailwindcss";
```

### Установка с помощью PostCSS

Если ваш проект использует PostCSS или вы используете фреймворк вроде Next.js, который поддерживает плагины PostCSS, установите Tailwind вместе с нашим новым специальным плагином PostCSS:

```bash {{ filename: 'Terminal' }}
$ npm install tailwindcss@next @tailwindcss/postcss@next
```

Далее добавьте наш плагин PostCSS в ваш файл `postcss.config.js`:

```js {{ filename: 'postcss.config.mjs' }}
  export default {
    plugins: {
>     '@tailwindcss/postcss': {},
    },
  };
```

Наконец, импортируйте Tailwind в ваш основной файл CSS:

```css  {{ filename: 'app.css' }}
> @import "tailwindcss";
```

### Установка с помощью CLI

Если вы хотите использовать наш специализированный инструмент CLI, установите Tailwind вместе с нашим новым специализированным пакетом CLI:

```bash {{ filename: 'Terminal' }}
$ npm install tailwindcss@next @tailwindcss/cli@next
```

Далее импортируйте Tailwind в ваш основной файл CSS:

```css  {{ filename: 'app.css' }}
> @import "tailwindcss";
```

Затем скомпилируйте ваш CSS с помощью инструмента CLI:
```bash {{ filename: 'Terminal' }}
$ npx @tailwindcss/cli -i input.css -o output.css
```

Вы также можете загрузить [автономные сборки](https://github.com/tailwindlabs/tailwindcss/releases/tag/v4.0.0-beta.1) нового инструмента CLI с GitHub для проектов, которые иным образом не зависят от экосистемы Node.js.

### Обновление с 3 версии

Если вы хотите попробовать обновить проект с версии 3 до бета-версии 4, вы можете воспользоваться нашим инструментом обновления, который выполнит большую часть сложной работы за вас:

```bash {{ filename: 'Terminal' }}
$ npx @tailwindcss/upgrade@next
```

Для большинства проектов инструмент обновления автоматизирует весь процесс миграции, включая обновление зависимостей, перенос файла конфигурации в CSS и обработку любых изменений в файлах шаблонов.

**Мы рекомендуем запустить инструмент обновления в новой ветке**, затем внимательно просмотреть разницу и протестировать проект в браузере, чтобы убедиться, что все изменения выглядят правильно. Возможно, вам придется вручную подправить несколько вещей в сложных проектах, но инструмент сэкономит вам массу времени в любом случае.

Также хорошей идеей будет просмотреть все [критические изменения](#changes-from-v3) в v4.0 и получить хорошее представление о том, что изменилось, на случай, если вам нужно обновить что-то еще в вашем проекте, что инструмент обновления не улавливает.


---

## Что нового в версии 4.0

### Новый высокопроизводительный движок

Tailwind CSS v4.0 — это полностью переписанная версия фреймворка, в которой учтено все, что мы узнали об архитектуре за эти годы, и оптимизирована для максимально возможной скорости.

При сравнении производительности на наших собственных проектах мы обнаружили, что полная перестройка выполняется в 3,5 раза быстрее, а инкрементальная сборка — в 8 раз быстрее.

Вот среднее время сборки, которое мы увидели при сравнении производительности Tailwind CSS v4.0 с [Catalyst](https://tailwindui.com/templates/catalyst):

|     | v3.4 | v4.0 Beta | Улучшение |
| --- | ---: | ---: | ---: |
| Полная сборка |  378ms | 100ms | 3.78x |
| Инкрементная перестройка с новым CSS |  44ms | 5ms | 8.8x |
| Инкрементная перестройка без нового CSS |  35ms | 192µs | 182x |

Наиболее впечатляющее улучшение касается инкрементальных сборок, которым на самом деле не нужно компилировать какой-либо новый CSS — эти сборки более чем в 100 раз быстрее и завершаются за _микросекунды_. И чем дольше вы работаете над проектом, тем больше таких сборок вы встречаете, потому что вы просто используете классы, которые уже использовали раньше, например `flex`, `col-span-2` или `font-bold`.

### Конфигурация CSS-first

Одним из самых больших изменений в Tailwind CSS v4.0 является переход от настройки проекта в JavaScript к настройке в CSS.

Вместо файла `tailwind.config.js` вы можете настроить все свои настройки непосредственно в файле CSS, в который вы импортируете Tailwind, что дает вам на один файл меньше, о котором нужно беспокоиться в вашем проекте:

```css  {{ filename: 'app.css', style: 'framed', color: 'sky' }}
@import "tailwindcss";

@theme {
  --font-display: "Satoshi", "sans-serif";

  --breakpoint-3xl: 1920px;

  --color-avocado-100: oklch(0.99 0 0);
  --color-avocado-200: oklch(0.98 0.04 113.22);
  --color-avocado-300: oklch(0.94 0.11 115.03);
  --color-avocado-400: oklch(0.92 0.19 114.08);
  --color-avocado-500: oklch(0.84 0.18 117.33);
  --color-avocado-600: oklch(0.53 0.12 118.34);

  --ease-fluid: cubic-bezier(0.3, 0, 0, 1);
  --ease-snappy: cubic-bezier(0.2, 0, 0, 1);

  /* ... */
}
```

Новая конфигурация CSS-first позволяет вам делать практически все, что вы могли бы сделать в файле `tailwind.config.js`, включая настройку токенов дизайна, настройку источников контента, определение пользовательских утилит и вариантов, установку плагинов и многое другое.

Чтобы узнать больше о том, как все это работает, прочтите документацию [Подробная конфигурация CSS](#css-configuration-in-depth).

### Переменные тем в CSS

Tailwind CSS v4.0 берет все ваши токены дизайна и делает их доступными как переменные CSS по умолчанию, так что вы можете ссылаться на любое значение, которое вам нужно во время выполнения, используя только CSS.

Используя пример `@theme` из предыдущего примера, все эти значения будут добавлены в ваш CSS как обычные пользовательские свойства:

```css {{ filename: 'dist.css', style: 'framed', color: 'indigo' }}
:root {
  --font-display: "Satoshi", "sans-serif";

  --breakpoint-3xl: 1920px;

  --color-avocado-100: oklch(0.99 0 0);
  --color-avocado-200: oklch(0.98 0.04 113.22);
  --color-avocado-300: oklch(0.94 0.11 115.03);
  --color-avocado-400: oklch(0.92 0.19 114.08);
  --color-avocado-500: oklch(0.84 0.18 117.33);
  --color-avocado-600: oklch(0.53 0.12 118.34);

  --ease-fluid: cubic-bezier(0.3, 0, 0, 1);
  --ease-snappy: cubic-bezier(0.2, 0, 0, 1);

  /* ... */
}
```

Это позволяет легко повторно использовать эти значения в качестве встроенных стилей или передавать их в библиотеки, такие как [Motion](https://motion.dev/docs/react-animation#css-variables), для их анимации.

### Нативные каскадные слои CSS

Мы используем настоящие [каскадные слои CSS](https://developer.mozilla.org/en-US/docs/Web/CSS/@layer) в v4.0, что упрощает управление приоритетом стилей и их взаимодействием друг с другом.

Вот как выглядит вывод при создании CSS с помощью v4.0:

```css {{ filename: 'dist.css', style: 'framed', color: 'purple', scroll: true }}
@layer theme, base, components, utilities;

@layer theme {
  :root {
    --font-sans: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
    'Segoe UI Symbol', 'Noto Color Emoji';
    --font-serif: ui-serif, Georgia, Cambria, 'Times New Roman', Times, serif;
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono',
      'Courier New', monospace;

    /* ... */
  }
}

@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    border: 0 solid;
  }

  /* ... */
}

@layer utilities {
  .pointer-events-none {
    pointer-events: none;
  }
  .visibility-hidden {
    visibility: hidden;
  }

  /* ... */

  .focus\:outline:focus {
    outline-width: 1px;
  }

  @media (width >= 40rem) {
    @media (hover: hover) {
      .sm\:hover\:opacity-100:hover {
        opacity: 100%;
      }
    }
  }
}
```

У нас были слои как концепция в Tailwind в течение многих лет, но собственные каскадные слои могут делать вещи, которые мы не могли бы легко воспроизвести во время сборки, например, изолировать стили внутри слоя, даже если они имеют более высокую специфичность, чем стили в другом слое. Меньше кода для нас, чтобы поддерживать!

### Автоматическое определение источника

Вы знаете, как вам всегда приходилось настраивать этот раздражающий массив `content` в Tailwind CSS v3? В v4.0 мы придумали кучу эвристик для автоматического обнаружения всего этого, так что вам вообще не нужно его настраивать.

Например, мы автоматически игнорируем все в вашем файле `.gitignore`, чтобы избежать сканирования зависимостей или сгенерированных файлов, которые не находятся под контролем версий:

```bash {{ filename: '.gitignore', style: 'framed', color: 'fuchsia' }}
# dependencies
/node_modules

# testing
/coverage

# caches
/.next/

# production
/build
```

Мы также автоматически игнорируем все двоичные расширения, такие как изображения, видео, файлы .zip и т. д.

И если вам когда-нибудь понадобится явно добавить источник, который исключен по умолчанию, вы всегда можете добавить его с помощью директивы `@source`, прямо в вашем CSS-файле:

```css {{ filename: 'app.css', style: 'framed', color: 'pink' }}
  @import "tailwindcss";
> @source "../node_modules/@my-company/ui-lib";
```

Директива `@source` использует ту же эвристику, поэтому она также исключит, например, двоичные типы файлов, без необходимости явно указывать все расширения для сканирования.

### Встроенная поддержка импорта

До версии 4.0, если вы хотели встроить другие файлы CSS с помощью `@import`, вам приходилось настраивать другой плагин, например `postcss-import`, чтобы он обрабатывал это за вас.

Теперь мы обрабатываем это из коробки, поэтому вам не нужны никакие другие инструменты:

```diff-js {{ filename: 'postcss.config.mjs', style: 'framed', color: 'sky' }}
  export default {
    plugins: {
-     'postcss-import': {},
      '@tailwindcss/postcss': {},
    },
  };
```

Наша система импорта специально создана для Tailwind CSS, поэтому мы смогли сделать ее еще быстрее, тесно интегрировав ее с нашим движком.

### Встроенная транспиляция CSS

При сборке для производства Tailwind CSS v4.0 автоматически пропускает ваш CSS через [Lightning CSS](https://lightningcss.dev/), который обрабатывает такие вещи, как префиксы поставщиков, транспиляция современных функций, минификация и многое другое.

Это означает, что вы также можете удалить из своего проекта такие инструменты, как `autoprefixer` и `postcss-preset-env`:

```diff-js {{ filename: 'postcss.config.mjs', style: 'framed', color: 'indigo' }}
  export default {
    plugins: {
      '@tailwindcss/postcss': {},
-     'postcss-preset-env': {},
-     'autoprefixer': {},
    },
  };
```

В версии 4.0 Tailwind CSS — это единственное, что вам нужно настроить для управления всем конвейером CSS — никаких других инструментов не требуется.

### Упрощенная настройка темы

В версии 4.0 мы действительно сократили объем настройки темы, которую вам нужно сделать, особенно для вещей, которые на самом деле не являются токенами дизайна.

Такие утилиты, как `grid-cols-12`, `z-40` и `opacity-70`, больше не основаны на вашей теме — они просто работают. Нужна ли вам сетка из 5 столбцов или из 73 столбцов, вам не нужно ничего настраивать, чтобы это произошло.

```html
<div class="grid **grid-cols-73**">
  <div>1</div>
  <!-- ... -->
  <div>73</div>
</div>
```

Мы также применили те же упрощения к таким вариантам, как `data-*` — вам больше не нужно настраивать их или использовать произвольные значения для простых логических атрибутов:

```diff-html
- <div class="opacity-50 **data-[selected]:opacity-100**" data-selected>
+ <div class="opacity-50 **data-selected:opacity-100**" data-selected>
    <!-- ... -->
  </div>
```

Эти изменения означают, что вы будете менять конфигурацию темы гораздо реже, и она останется сосредоточенной на важных элементах дизайна, таких как типографика, цветовая палитра и контрольные точки.

### Динамическая шкала интервалов

Мы упростили работу утилит интервалов, таких как `px-*`, `mt-*`, `w-*`, `h-*` и других, выведя их все из одного значения шкалы интервалов, определенного как `0.25rem` в теме по умолчанию:

```css
@theme {
  --spacing: 0.25rem;
}
```

Когда вы определяете шкалу интервалов таким образом, в вашей шкале интервалов доступно каждое кратное `0.25rem`. Это означает, что утилиты вроде `mt-21` будут работать без дополнительной настройки, в отличие от v3, где вам приходилось выбирать между `mt-20` и `mt-24` или переходить к использованию произвольного значения.

А если вам нужны дополнительные ограничения, вы всегда можете отключить переменную `--spacing` и указать свою собственную явную шкалу:

```css
@theme {
  --spacing: initial
  --spacing-1: 0.25rem
  --spacing-2: 0.5rem
  --spacing-4: 1rem
  --spacing-8: 2rem
  --spacing-12: 3rem
}
```

### Модернизированная цветовая палитра P3

Мы обновили всю цветовую палитру по умолчанию с `rgb` до `oklch`, воспользовавшись более широкой гаммой, чтобы сделать цвета более яркими в местах, где мы ранее были ограничены цветовым пространством sRGB.

<div>
  <ColorPalette/>
</div>

Мы постарались сохранить баланс между всеми цветами таким же, как в v3, поэтому, хотя мы обновили все по всем направлениям, это не должно ощущаться как критическое изменение при обновлении существующих проектов.

### Упрощенные переменные цвета

Если вы использовали переменные CSS в своей цветовой палитре в v3, вы, возможно, помните, что приходилось делать странные вещи, например, определять цвета как просто список чисел без включения функции `rgb(…)` или использовать заполнитель `<alpha-value>`, чтобы работали модификаторы непрозрачности.

Благодаря новой функции CSS [`color-mix(…)` function](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix) ничего из этого не нужно в v4.0 — вы просто определяете свои цвета как переменные, и все функции модификаторов непрозрачности работают автоматически:

```css  {{ filename: 'app.css', style: 'framed', color: 'purple' }}
@import "tailwindcss";

@theme {
  --color-primary: var(--color-blue-500);
  --color-error: var(--color-red-500);

  /* ... */
}
```

Теперь, когда вы используете такую ​​утилиту, как `bg-primary/50`, она просто работает — никаких сложных обходных путей не требуется:

```html
<div class="bg-primary/50">
  <!-- ... -->
</div>
```

### Поддержка контейнерных запросов

Мы добавили поддержку контейнерных запросов в ядро ​​для v4.0, поэтому вам больше не нужен плагин `@tailwindcss/container-queries`:

```html  {{ filename: 'HTML', style: 'framed', color: 'pink' }}
<div class="@container">
  <div class="grid grid-cols-1 @sm:grid-cols-3 @lg:grid-cols-4">
    <!-- ... -->
  </div>
</div>
```

Мы также добавили поддержку запросов контейнера максимальной ширины с использованием нового варианта `@max-*`:

```html
<div class="@container">
  <div class="grid grid-cols-3 @max-md:grid-cols-1">
    <!-- ... -->
  </div>
</div>
```

Как и наши обычные варианты точек останова, вы также можете объединять варианты `@min-*` и `@max-*` для определения диапазонов запросов контейнера:

```html
<div class="@container">
  <div class="flex @min-md:@max-xl:hidden">
    <!-- ... -->
  </div>
</div>
```

Поддержка браузером контейнерных запросов теперь [really great](https://caniuse.com/css-container-queries), и я рад сделать их использование в ваших проектах в версии 4.0 еще проще.

### 3D-преобразования

Мы наконец-то добавили API для выполнения 3D-преобразований, таких как `rotate-x-*`, `rotate-y-*`, `scale-z-*`, `translate-z-*` и многое другое.

```html {{ example: true }}
  <div class="grid [perspective:1200px]">
    <article class="transition-all relative isolate z-10 flex w-full max-w-80 justify-self-center [transform-style:_preserve-3d] [transform:rotateX(51deg)_rotateZ(43deg)] flex-col justify-end overflow-hidden rounded-2xl bg-gray-900 px-8 pt-80 pb-8 shadow-xl duration-500 hover:-translate-y-4 hover:[transform:rotateX(49deg)__rotateZ(38deg)] hover:shadow-2xl">
      <img src="https://images.unsplash.com/photo-1496128858413-b36217c2ce36?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3603&q=80" alt="" class="absolute inset-0 -z-10 size-full object-cover" />
      <div class="absolute inset-0 -z-10 bg-gradient-to-t from-gray-900 via-gray-900/40"></div>
      <div class="absolute inset-0 -z-10 rounded-2xl ring-1 ring-gray-900/10 ring-inset"></div>
      <div class="flex flex-wrap items-center gap-y-1 overflow-hidden text-sm/6 text-gray-300">
        <time dateTime="2020-03-16" class="mr-8">Mar 16, 2020</time>
        <div class="-ml-4 flex items-center gap-x-4">
          <svg view-box="0 0 2 2" class="-ml-0.5 size-0.5 flex-none fill-white/50"><circle r="1" cx="1" cy="1" /></svg>
          <div class="flex gap-x-2.5">
            <img src="https://images.unsplash.com/photo-1519244703995-f4e0f30006d5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="" class="size-6 flex-none rounded-full bg-white/10" />
            Michael Foster
          </div>
        </div>
      </div>
      <h3 class="mt-3 text-lg/6 font-semibold text-white">
          <span class="absolute inset-0"></span>
          Boost your conversion rate
      </h3>
    </article>
  </div>
```


```html
<div class="**perspective-distant**">
  <article class="... **transform-3d rotate-x-51 rotate-z-43** shadow-xl transition-all duration-500 **hover:-translate-y-4 hover:rotate-x-49 hover:rotate-z-38** hover:shadow-2xl">
    <!-- ... -->
  </article>
</div>
```

Используйте утилиту `transform-3d` для включения 3D-преобразований, установив правильный `transform-style`


#### Повороты

Используйте утилиты `rotate-x-*`, `rotate-y-*` и `rotate-z-*` для поворота элементов в трехмерном пространстве.

Все эти утилиты автоматически поддерживают любые числовые значения из коробки, но вот несколько примеров для справки:


<div className="not-prose">
  <ClassTable showHeading={false} utilities={{
    'rotate-x-0': {transform: `rotateX(0deg) var(--tw-rotate-y) var(--tw-rotate-z)`},
    'rotate-x-3': {transform: `rotateX(3deg)  var(--tw-rotate-y) var(--tw-rotate-z)`},
    'rotate-x-45': {transform: `rotateX(45deg) var(--tw-rotate-y) var(--tw-rotate-z)`},
    'rotate-x-180': {transform: `rotateX(180deg) var(--tw-rotate-y) var(--tw-rotate-z)`},
    'rotate-y-0': {transform: `var(--tw-rotate-x) rotateY(0deg) var(--tw-rotate-z)`},
    'rotate-y-3': {transform: `var(--tw-rotate-x) rotateY(3deg) var(--tw-rotate-z)`},
    'rotate-y-45': {transform: `var(--tw-rotate-x) rotateY(45deg) var(--tw-rotate-z)`},
    'rotate-y-180': {transform: `var(--tw-rotate-x) rotateY(180deg) var(--tw-rotate-z)`},
    'rotate-z-0': {transform: `var(--tw-rotate-x) var(--tw-rotate-y) rotateZ(0deg)`},
    'rotate-z-3': {transform: `var(--tw-rotate-x) var(--tw-rotate-y) rotateZ(3deg)`},
    'rotate-z-45': {transform: `var(--tw-rotate-x) var(--tw-rotate-y) rotateZ(45deg)`},
    'rotate-z-180': {transform: `var(--tw-rotate-x) var(--tw-rotate-y) rotateZ(180deg)`},
  }}/>
</div>


#### Масштабирование

Используйте новые утилиты `scale-z-*` для масштабирования элементов по оси z.

Вы можете использовать любое числовое значение, которое хотите автоматически из коробки, но вот несколько примеров для справки:

<div className="not-prose">
  <ClassTable showHeading={false} utilities={{
    'scale-z-0': {scale: `var(--tw-scale-x) var(--tw-scale-y) 0%`},
    'scale-z-50': {scale: `var(--tw-scale-x) var(--tw-scale-y) 50%`},
    'scale-z-75': {scale: `var(--tw-scale-x) var(--tw-scale-y) 75%`},
    'scale-z-100': {scale: `var(--tw-scale-x) var(--tw-scale-y) 100%`},
    'scale-z-125': {scale: `var(--tw-scale-x) var(--tw-scale-y) 125%`},
    'scale-z-150': {scale: `var(--tw-scale-x) var(--tw-scale-y) 150%`},
    'scale-z-200': {scale: `var(--tw-scale-x) var(--tw-scale-y) 200%`},
  }}/>
</div>

#### Перемещение

Используйте новые утилиты `translate-z-*` для перемещения элементов ближе или дальше:

Эта утилита использует ваш масштаб интервалов по умолчанию и поддерживает все эти значения из коробки, но вот несколько примеров для справки:

<div className="not-prose">
  <ClassTable showHeading={false} utilities={{
    'translate-z-0': {translate: `var(--tw-translate-x) var(--tw-translate-y) calc(var(--spacing) * 0`},
    'translate-z-0': {translate: `var(--tw-translate-x) var(--tw-translate-y) calc(var(--spacing) * 0`},
    'translate-z-0.5': {translate: `var(--tw-translate-x) var(--tw-translate-y) calc(var(--spacing) * 0.5`},
    'translate-z-1': {translate: `var(--tw-translate-x) var(--tw-translate-y) calc(var(--spacing) * 1`},
    'translate-z-2': {translate: `var(--tw-translate-x) var(--tw-translate-y) calc(var(--spacing) * 2`},
    'translate-z-4': {translate: `var(--tw-translate-x) var(--tw-translate-y) calc(var(--spacing) * 4`},
    'translate-z-px': {translate: `var(--tw-translate-x) var(--tw-translate-y) 1px`},
  }}/>
</div>

#### Перспектива

Используйте такие утилиты, как `perspective-near`, `perspective-normal` и `perspective-distant`, а также новые утилиты `perspective-origin-*` для управления перспективой, используемой для 3D-преобразований:

<div className="not-prose">
  <ClassTable showHeading={false} utilities={{
    'perspective-dramatic': {'perspective': `100px`},
    'perspective-near': {'perspective': `300px`},
    'perspective-normal': {'perspective': `500px`},
    'perspective-midrange': {'perspective': `800px`},
    'perspective-distant': {'perspective': `1200px`},
    'perspective-[760px]': {'perspective': `760px`},
    'perspective-origin-bottom': {'perspective-origin': `bottom`},
    'perspective-origin-bottom-left': {'perspective-origin': `bottom-left`},
    'perspective-origin-bottom-right': {'perspective-origin': `bottom-right`},
    'perspective-origin-center': {'perspective-origin': `center`},
    'perspective-origin-left': {'perspective-origin': `left`},
    'perspective-origin-right': {'perspective-origin': `right`},
    'perspective-origin-top': {'perspective-origin': `top`},
    'perspective-origin-top-right': {'perspective-origin': `top-right`},
    'perspective-origin-top-left': {'perspective-origin': `top-left`},
  }}/>
</div>

Все утилиты `perspective-*` можно настроить с помощью пространства имен `--perspective-*` в вашей теме.

#### Видимость задней стороны

Используйте новые утилиты `backface-visible` и `backface-hidden`, чтобы контролировать, будет ли видна задняя сторона элемента при трансформации в трехмерном пространстве.

<div className="not-prose">
  <ClassTable showHeading={false} utilities={{
    'backface-visible': {'backface-visibility': `visible`},
    'backface-hidden': {'backface-visibility': `hidden`},
  }}/>
</div>

### Углы линейного градиента

Линейные градиенты теперь поддерживают углы в качестве значений, поэтому вы можете использовать такие утилиты, как `bg-linear-45`, для создания градиента под углом 45 градусов:

```html {{ example: true }}
<div class="grid place-items-center">
  <div class="size-48 rounded-lg bg-[linear-gradient(45deg,theme(colors.indigo.500),theme(colors.purple.500),theme(colors.pink.500))]"></div>
</div>
```

```html
<div class="**bg-linear-45** from-indigo-500 via-purple-500 to-pink-500"></div>
```

Вы могли заметить, что мы также переименовали `bg-gradient-*` в `bg-linear-*` — скоро вы поймете почему!


### Модификаторы интерполяции градиента

Мы добавили возможность управлять режимом интерполяции цвета для градиентов с помощью модификатора, поэтому класс типа `bg-linear-to-r/srgb` интерполирует с использованием sRGB, а `bg-linear-to-r/oklch` интерполирует с использованием OKLCH:

```html {{ example: true }}
<div class="grid grid-cols-1 gap-4">
  <div class="h-16 rounded-lg bg-[linear-gradient(in_srgb_to_right,theme(colors.indigo.500),theme(colors.teal.400))]"></div>
  <div class="h-16 rounded-lg bg-[linear-gradient(in_oklch_to_right,theme(colors.indigo.500),theme(colors.teal.400))]"></div>
</div>
```

```html
  <div class="**bg-linear-to-r/srgb** from-indigo-500 to-teal-400"></div>
  <div class="**bg-linear-to-r/oklch** from-indigo-500 to-teal-400"></div>
```

Использование полярных цветовых пространств, таких как OKLCH или HSL, может привести к гораздо более ярким градиентам, когда цвета `from-*` и `to-*` находятся далеко друг от друга на цветовом круге. Мы используем OKLAB по умолчанию в v4.0, но вы всегда можете выполнить интерполяцию, используя другое цветовое пространство, добавив один из этих модификаторов.

### Конические и радиальные градиенты

Мы добавили новые утилиты `bg-conic-*` и `bg-radial-*` для создания конических и радиальных градиентов:

```html {{ example: true }}
<div class="flex justify-around p-8">
  <div class="bg-[conic-gradient(in_hsl_longer_hue,theme(colors.red.600),theme(colors.red.600))]  size-24 rounded-full"></div>
  <div class="bg-[radial-gradient(at_25%_25%,white,theme(colors.zinc.900)_75%)] size-24 rounded-full"></div>
</div>
```

```html
<div class="bg-conic/[in_hsl_longer_hue] from-red-600 to-red-600 size-24 rounded-full"></div>
<div class="bg-radial-[at_25%_25%] from-white to-zinc-900 to-75% size-24 rounded-full"></div>
```

Эти новые утилиты работают вместе с существующими утилитами `from-*`, `via-*` и `to-*`, позволяя создавать конические и радиальные градиенты таким же образом, как вы создаете линейные градиенты, и включают модификаторы для настройки метода интерполяции цвета и поддержку произвольных значений для управления такими деталями, как положение градиента.


### Встроенные тени и кольца

Мы добавили специальные утилиты `inset-shadow-*` и `inset-ring-*` в версии 4.0, которые можно объединить с существующими утилитами `shadow-*` и `ring-*`, что дает вам четыре слоя теней, которые вы можете накладывать друг на друга, чтобы создавать эффекты, необходимые для ваших проектов.

```html {{example: true}}
<div class="relative flex justify-around p-12 pb-16">
  <div class="relative inset-shadow-lg grid h-16 w-40 grid-flow-col grid-cols-[auto_auto] items-center justify-center gap-2 rounded-xl bg-blue-600 to-10% text-2xl text-blue-50 ring shadow-md ring-black/10 [box-shadow:oklch(1_5.96046e-8_none_/_0.2)_0px_2px_4px_0px_inset,_rgb(255_255_255_/_15%)_0px_0px_0px_1px_inset,_rgba(0,_0,_0,_0)_0px_0px_0px_0px,_theme(colors.blue.600)_0px_0px_0px_1px,_oklch(0_0_none_/_0.2)_0px_10px_15px_-3px,_oklch(0_0_none_/_0.2)_0px_4px_6px_-4px]">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5" /></svg>
    <p>Send</p>
    <div class="absolute bottom-0 translate-y-[50%] left-1/2 size-40 overflow-hidden rounded-full border-2 shadow-lg border-black/20">
      <div class="absolute right-[190%] bottom-[80%] grid h-16 w-40 scale-[400%] grid-flow-col grid-cols-[auto_auto] items-center justify-center gap-2 rounded-2xl bg-blue-600 text-2xl text-blue-100 ring shadow-md ring-black/10 [box-shadow:oklch(1_5.96046e-8_none_/_0.4)_0px_2px_4px_0px_inset,_rgb(255_255_255_/_15%)_0px_0px_0px_1px_inset,_rgba(0,_0,_0,_0)_0px_0px_0px_0px,__theme(colors.blue.600)_0px_0px_0px_1px,_oklch(0_0_none_/_0.2)_0px_10px_15px_-3px,_oklch(0_0_none_/_0.2)_0px_4px_6px_-4px]
  ]">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5" /></svg>
        <p>Send</p>
      </div>
    </div>
  </div>
</div>
```

{/* https://x.com/adamwathan/status/1760787811605549159/photo/1 */}

```html
<button class="**shadow-md inset-shadow-sm inset-shadow-white/20 ring ring-blue-600 inset-ring inset-ring-white/15** ...">
  <!-- ... -->
</button>
```

Утилиты `inset-ring-*` поддерживают любое значение ширины, как и утилиты `ring-*`, а утилиты `inset-shadow-*` поставляются с размерами `2xs`, `xs` и `sm` из коробки. Мы можем добавить больше в будущем, но эти кажутся наиболее полезными прямо сейчас.

```css
@theme {
  --inset-shadow-2xs: inset 0 1px rgb(0 0 0 / 0.05);
  --inset-shadow-xs: inset 0 1px 1px rgb(0 0 0 / 0.05);
  --inset-shadow-sm: inset 0 2px 4px rgb(0 0 0 / 0.05);
}
```

Как и обычные утилиты `shadow-*` и `ring-*`, эти обе поддерживают цвета, используя такие классы, как `inset-shadow-black/25` и `inset-ring-white/50`.

### Утилиты \`field-sizing\`

Мы добавили утилиты для нового свойства `field-sizing`, которое позволяет создавать текстовые области с автоматически изменяемым размером, используя только CSS:

```html {{example: {hint: 'Type in the textarea to see the effect'}}}
<div class="py-4 grid">
  <div class="relative w-full max-w-96 justify-self-center">
    <label for="comment" class="block text-sm/6 font-medium text-gray-900 dark:text-white">Add your comment</label>
    <div class="mt-2">
      <textarea placeholder="Write something..." name="comment" id="comment" class="block w-full resize-none rounded-md border-0 px-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none sm:text-sm/6 [field-sizing:content] dark:text-gray-100 dark:bg-gray-800 dark:ring-gray-600"></textarea>
    </div>
  </div>
</div>
```

```html
<label class="block">
  <span class="block text-sm/6 font-medium text-gray-900 dark:text-white">Add your comment</span>
  <textarea class="**field-sizing-content** ..."></textarea>
</label>
```

Используйте `field-sizing-content`, чтобы изменить размер элемента управления в соответствии с его содержимым, или `field-sizing-fixed`, чтобы задать элементу управления фиксированный размер.

### Утилиты \`color-scheme\`

Вас когда-нибудь раздражало, что ваше приложение отображало светлые полосы прокрутки в темном режиме? Вам нужны эти новые утилиты `color-scheme`.

```html {{example: { p: 'none', hint: 'Scroll the content to see the scrollbar themes' } }}
<div class="grid grid-cols-1 sm:grid-cols-2 [color-scheme:light]">
  <div class="p-8 pt-7">
    <p class="mb-2 text-sm font-medium text-slate-500">Light mode</p>
    <div class="bg-white rounded-lg px-6 py-8 max-h-56 ring-1 ring-slate-900/5 shadow-xl overflow-y-scroll">
      <h3 class="text-base font-medium text-slate-900 tracking-tight">It's a Mammal</h3>
      <p class="mt-2 text-sm text-slate-500">
        Right now there are six-hundred Titleists that I got from the driving range in the trunk of my car. Why don't we drive out to Rock-a-Way… and hit `em into the ocean! Now picture this. we find a nice sweet spot between the dunes, we take out our drivers, we tee up and, that ball goes sailing up into the sky holds there for a moment and then.. gulp!
      </p>
    </div>
  </div>
  <div class="bg-slate-900 p-8 pt-7 [color-scheme:dark]">
    <p class="mb-2 text-sm font-medium text-slate-400">Dark mode</p>
    <div class="bg-slate-800 rounded-lg px-6 py-8 max-h-56 ring-1 ring-slate-900/5 shadow-xl overflow-y-scroll">
      <h3 class="text-base font-medium text-white tracking-tight">It's a Mammal</h3>
      <p class="mt-2 text-sm text-slate-200">
       Right now there are six-hundred Titleists that I got from the driving range in the trunk of my car. Why don't we drive out to Rock-a-Way… and hit `em into the ocean! Now picture this. we find a nice sweet spot between the dunes, we take out our drivers, we tee up and, that ball goes sailing up into the sky holds there for a moment and then.. gulp!
      </p>
    </div>
  </div>
</div>
```
```html
<div class="grid grid-cols-2">
  <div class="bg-white overflow-y-scroll **scheme-light**">
     ...
  </div>
  <div class="bg-slate-800 overflow-y-scroll **scheme-dark**">
     ...
  </div>
</div>
```

Вот полный список всех новых API:

<div className="not-prose">
  <ClassTable showHeading={false} utilities={{
    'scheme-normal': {'color-scheme': 'normal'},
    'scheme-dark': {'color-scheme': 'dark'},
    'scheme-light': {'color-scheme': 'light'},
    'scheme-light-dark': {'color-scheme': 'light dark'},
    'scheme-only-dark': {'color-scheme': 'only dark'},
    'scheme-only-light': {'color-scheme': 'only light'},
  }}/>
</div>

Добавьте `scheme-light dark:scheme-dark` к элементу `html` или `body`, и ваши полосы прокрутки всегда будут выглядеть хорошо, независимо от того, какую стратегию темного режима вы используете.

### Утилиты \`font-stretch\`

Мы добавили утилиты для нового свойства `font-stretch`, которое помогает вам стилизовать переменные шрифты, поддерживающие различную ширину:

```html {{ example: true }}
<div class="flex flex-col gap-8">
  <div>
    <span class="font-medium text-sm text-slate-500 font-mono mb-3 dark:text-slate-400">font-stretch-extra-condensed</span>
    <p class="text-xl font-medium [font-stretch:extra-condensed] font-[system-ui] text-slate-900 dark:text-slate-200">
      The quick brown fox jumps over the lazy dog.
    </p>
  </div>
  <div>
    <span class="font-medium text-sm text-slate-500 font-mono mb-3 dark:text-slate-400">font-stretch-condensed</span>
    <p class="text-xl font-medium [font-stretch:condensed] font-[system-ui] text-slate-900 dark:text-slate-200">
      The quick brown fox jumps over the lazy dog.
    </p>
  </div>
  <div>
    <span class="font-medium text-sm text-slate-500 font-mono mb-3 dark:text-slate-400">font-stretch-normal</span>
    <p class="text-xl font-medium [font-stretch:normal] font-[system-ui] text-slate-900 dark:text-slate-200">
      The quick brown fox jumps over the lazy dog.
    </p>
  </div>
  <div>
    <span class="font-medium text-sm text-slate-500 font-mono mb-3 dark:text-slate-400">font-stretch-expanded</span>
    <p class="text-xl font-medium [font-stretch:expanded] font-[system-ui] text-slate-900 dark:text-slate-200">
      The quick brown fox jumps over the lazy dog.
    </p>
  </div>
  <div>
    <span class="font-medium text-sm text-slate-500 font-mono mb-3 dark:text-slate-400">font-stretch-extra-expanded</span>
    <p class="text-xl font-medium [font-stretch:extra-expanded] font-[system-ui] text-slate-900 dark:text-slate-200">
      The quick brown fox jumps over the lazy dog.
    </p>
  </div>
</div>
```

Похоже, в какой-то момент название этого параметра изменится на `font-width`, но пока ни один браузер его не поддерживает, с нетерпением жду возможности разобраться с этим.

<div className="not-prose">
  <ClassTable showHeading={false} utilities={{
    'font-stretch-normal': {'font-stretch': 'normal'},
    'font-stretch-ultra-condensed': {'font-stretch': 'ultra-condensed'},
    'font-stretch-extra-condensed': {'font-stretch': 'extra-condensed'},
    'font-stretch-condensed': {'font-stretch': 'condensed'},
    'font-stretch-semi-condensed': {'font-stretch': 'semi-condensed'},
    'font-stretch-semi-expanded': {'font-stretch': 'semi-expanded'},
    'font-stretch-expanded': {'font-stretch': 'expanded'},
    'font-stretch-extra-expanded': {'font-stretch': 'extra-expanded'},
    'font-stretch-ultra-expanded': {'font-stretch': 'ultra-expanded'},
    'font-stretch-0%': {'font-stretch': '0%'},
    'font-stretch-50%': {'font-stretch': '50%'},
    'font-stretch-75%': {'font-stretch': '75%'},
    'font-stretch-90%': {'font-stretch': '90%'},
    'font-stretch-95%': {'font-stretch': '95%'},
    'font-stretch-100%': {'font-stretch': '100%'},
    'font-stretch-105%': {'font-stretch': '105%'},
    'font-stretch-110%': {'font-stretch': '110%'},
    'font-stretch-125%': {'font-stretch': '125%'},
    'font-stretch-150%': {'font-stretch': '150%'},
    'font-stretch-200%': {'font-stretch': '200%'},
  }}/>
</div>


### Компонуемые варианты

В новом движке v4.0 некоторые варианты можно объединять в цепочку с другими вариантами, что позволяет использовать простые именованные API для вещей, для которых в v3 требовались сложные произвольные варианты:

```diff-html
  <div class="group">
-   <div class="group-has-[&[data-potato]]:opacity-100">
+   <div class="group-has-data-potato:opacity-100">
      <!-- ... -->
    </div>
    <div data-potato>
      <!-- ... -->
    </div>
  </div>
```

Это работает с любым вариантом, где это имеет смысл, включая `group-*`, `peer-*`, `has-*` и новые варианты `not-*` и `in-*`. Вы можете сцепить столько из них, сколько захотите, так что даже совершенно бесполезные классы, такие как `group-not-has-peer-not-data-active:underline`, будут генерировать настоящий CSS.

### Вариант \`@starting-style\`

Новый вариант `starting` добавляет поддержку новой функции CSS `@starting-style`, что позволяет изменять свойства элемента при его первом отображении:

```html {{example: {hint: 'Click the button to see the popover animate in', p: 'none'}}}
<iframe class="w-full h-[340px]" src="/examples/v4-docs-starting-style-example"></iframe>
```

```html
<div>
  <button popovertarget="my-popover">Check for updates</button>
  <div popover id="my-popover" class="opacity-0 transition-all duration-500 transition-discrete open:opacity-100 starting:open:opacity-0">
    <!-- ... -->
  </div>
</div>
```

### Вариант \`not-*\`

Новый вариант `not-*` добавляет поддержку псевдокласса `:not(…)`, позволяя вам стилизовать вещи, когда определенные условия не выполняются.

Например, добавление стилей наведения к кнопке только тогда, когда кнопка не находится в фокусе:

```html
<button class="bg-indigo-600 **hover:not-focus:bg-indigo-700**">
  <!-- ... -->
</button>
```

Вы также можете объединить вариант `not-*` с вариантами медиазапросов, такими как `forced-colors`, чтобы стилизовать элемент только тогда, когда режим принудительных цветов неактивен:

```html
<input type="radio" class="**not-forced-colors:appearance-none**" />
```

Он также работает с вариантами `supports-*`, поэтому вы можете стилизовать элемент в зависимости от отсутствия поддержки браузером определенной функции CSS:

```html
<div class="**not-supports-[display:grid]:flex**">
  <!-- ... -->
</div>
```

### Вариант \`inert\`

Новый вариант `inert` позволяет стилизовать элементы, отмеченные атрибутом `inert`:

```html
<main **inert** class="**inert:opacity-50** **inert:blur**">
  <!-- ... -->
</main>
```

Это полезно для добавления визуальных подсказок, которые дают понять, что элемент не является интерактивным.

### Вариант \`nth-*\`

Мы добавили четыре новых варианта для псевдоклассов `:nth-child(…)`, `:nth-last-child(…)`, `:nth-of-type(…)` и `:nth-last-of-type(…)`:

```html
<div class="**nth-3:underline**">…</div>
<div class="**nth-last-5:underline**">…</div>
<div class="**nth-of-type-4:underline**">…</div>
<div class="**nth-last-of-type-6:underline**">…</div>
```

По умолчанию вы можете передать им любое число, а также использовать произвольные значения для более сложных выражений, например `nth-[2n+1_of_li]`.

### Вариант \`in-*\`

Знаете наши варианты `group-*`, такие как `group-focus`? Новый вариант `in-*` такой же, за исключением того, что вам не нужно добавлять `group` к родительскому элементу:

```diff-html
- <div tabindex="0" class="group">
-   <div class="opacity-50 group-focus:opacity-100">
+ <div tabindex="0">
+   <div class="opacity-50 **in-focus:opacity-100**">
      <!-- ... -->
    </div>
  </div>
```

Вам по-прежнему часто придется использовать `group-*`, когда вам нужен точный контроль, но в остальное время это сэкономит вам несколько символов.

### Поддержка \`:popover-open\`

Мы обновили наш существующий вариант `open`, чтобы он включал псевдокласс `:popover-open`, а также атрибут `[open]`:

```html
<div>
  <button popovertarget="my-popover">Open Popover</button>
  <div popover id="my-popover" class="opacity-0 **open:opacity-100** ...">
    <!-- ... -->
  </div>
</div>
```

Я уверен, что в конечном итоге пожалею, что не сделал его отдельным вариантом `popover-open`, но я _действительно_ много думал об этом и не смог придумать ни одной ситуации, в которой элемент использовал бы и `[open]`, и `:popover-open` и имел бы разные стили для каждого условия. Кто-нибудь обновит спецификацию и наверняка в будущем меня в этом подставит.

### Вариант потомка

Вы знаете вариант `*`, который мы отправили некоторое время назад для таргетинга прямых потомков?

```html
<ul class="*:p-4">
  <li>One</li>
  <li>Two</li>
  <li>Three</li>
</ul>
```

В версии 4.0 мы добавили новый вариант `**` для выбора всех потомков — на мой взгляд, он наиболее полезен, если вы комбинируете его с другим вариантом для сужения области выбора:

```html
> <div class="**:data-avatar:rounded-full">
    <div>
>     <img src="…" data-avatar /> <!-- This element will be round -->
    </div>
    <p>…</p>
  </div>
```

Интересный факт — синтаксис вдохновлен глобами, к лучшему или к худшему.

---

## Подробная настройка CSS

### Настройка темы

Чтобы настроить тему в Tailwind CSS v4.0, используйте новую директиву `@theme` непосредственно в CSS:

```css
@import "tailwindcss";

@theme {
  --font-display: "Satoshi", "sans-serif";

  --breakpoint-3xl: 1920px;

  --color-avocado-100: oklch(0.99 0 0);
  --color-avocado-200: oklch(0.98 0.04 113.22);
  --color-avocado-300: oklch(0.94 0.11 115.03);
  --color-avocado-400: oklch(0.92 0.19 114.08);
  --color-avocado-500: oklch(0.84 0.18 117.33);
  --color-avocado-600: oklch(0.53 0.12 118.34);

  --ease-fluid: cubic-bezier(0.3, 0, 0, 1);
  --ease-snappy: cubic-bezier(0.2, 0, 0, 1);

  /* ... */
}
```

Каждая переменная CSS, которую вы здесь определяете, сообщает Tailwind о необходимости создания новых утилит и вариантов на основе этих значений, позволяя вам использовать в разметке такие классы, как `font-display`, `3xl:max-w-xl`, `text-avocado-400` и ​​`hover:ease-fluid`:

```html
<div class="max-w-lg **3xl:max-w-xl**">
  <h1 class="**font-display** text-4xl">
    Data to <span class="**text-avocado-400**">enrich</span> your online business
  </h1>
</div>
```

Каждый набор переменных является частью пространства имен, которое связывает их с соответствующими утилитами, например, утилиты размера шрифта ссылаются на пространство имен `--font-*`, все утилиты цвета ссылаются на пространство имен `--color-*`, а утилиты transition-timing-function ссылаются на пространство имен `--ease-*`.

Полный список смотрите в [справочнике по пространству имен тем](#namespace-reference).

#### Переопределение темы по умолчанию

По умолчанию добавление новых переменных CSS ведет себя как `extend` в Tailwind CSS v3:

```css
@import "tailwindcss";

@theme {
  /* These values are added in addition to the defaults */
  --font-display: "Satoshi", "sans-serif";
  --breakpoint-3xl: 1920px;
}
```

Чтобы переопределить все пространство имен, отмените его установку, используя синтаксис вроде `--font-*: initial`:

```css
  @import "tailwindcss";

  @theme {
>   --font-*: initial;
    --font-display: "Satoshi", "sans-serif";
  }
```

Теперь в вашем проекте не будет утилит по умолчанию `font-sans`, `font-serif` и `font-mono`, а `font-display` будет единственной доступной утилитой семейства шрифтов.

Вы также можете отменить всю тему по умолчанию с помощью `--*: initial`, если хотите начать полностью с нуля:

```css
  @import "tailwindcss";

  @theme {
>   --*: initial;
  }
```

Это удалит все токены дизайна по умолчанию, включая все шрифты по умолчанию, масштаб типографики, цветовую палитру и многое другое.

#### Настройка высоты строк по умолчанию для утилит размера шрифта

Чтобы задать высоту строк по умолчанию, толщину шрифта или межбуквенный интервал для пользовательского размера шрифта, добавьте вспомогательную переменную с помощью двойных тире, например `--text-big--line-height`:

```css
  @theme {
    --text-big: 16rem;
>   --text-big--line-height: 18rem;
>   --text-big--font-weight: 550;
>   --text-big--letter-spacing: -0.025em;
  }
```

#### Настройка анимации и ключевых кадров

По умолчанию Tailwind CSS v4.0 сохраняет любые пользовательские правила `@keyframes`, которые вы добавляете в свой CSS, даже если вы не используете соответствующие утилиты анимации в своем проекте.

Чтобы убедиться, что неиспользуемые правила `@keyframes` удалены, настройте их в `@theme`, а не в корне вашего CSS:

```css
@theme {
  --animate-marquee: marquee 3s linear infinite;

  @keyframes marquee {
    to {
      transform: translateY(-50%);
    }
  }
}
```

#### Справочник по пространству имен

Поскольку мы значительно [упростили конфигурацию темы](#simplified-theme-configuration) в Tailwind CSS v4.0, вы в основном будете работать только с этими пространствами имен:

<table>
  <thead>
    <tr>
      <th>Namespace</th>
      <th>Utilities</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td className='whitespace-nowrap'>`--color-*`</td>
      <td>Color utilities like <code>bg-white</code>, <code>text-black</code>, or <code>fill-blue-500</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--font-*`</td>
      <td>Font family utilities like <code>font-sans</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--text-*`</td>
      <td>Font size utilities like <code>text-sm</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--font-weight-*`</td>
      <td>Font weight utilities like <code>font-bold</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--tracking-*`</td>
      <td>Letter spacing utilities like <code>tracking-tight</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--leading-*`</td>
      <td>Line height utilities like <code>leading-relaxed</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--spacing-*`</td>
      <td>Spacing and sizing utilities like <code>pt-5</code>, <code>mr-2</code>, and <code>h-8</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--breakpoint-*`</td>
      <td>Breakpoint variants like <code>md:* </code> and <code>lg:*</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--container-*`</td>
      <td>Container query variants like <code>@md:\*</code> and width utilities like <code>w-sm</code> and <code>max-w-lg</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--radius-*`</td>
      <td>Border radius utilities like <code>rounded-md</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--shadow-*`</td>
      <td>Box shadow utilities like <code>shadow-lg</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--inset-shadow-*`</td>
      <td>Inset box shadow utilities like <code>inset-shadow-sm</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--drop-shadow-*`</td>
      <td>Drop shadow utilities like <code>drop-shadow-xl</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--ease-*`</td>
      <td>Transition timing function utilities like <code>ease-out</code></td>
    </tr>
    <tr>
      <td className='whitespace-nowrap'>`--animate-*`</td>
      <td>Animation utilities like <code>animate-spin</code></td>
    </tr>
  </tbody>
</table>


Если вам нужен более детальный контроль, большинство утилит также можно настроить в пространстве имен, которое соответствует имени свойства CSS. Например, пользовательские утилиты `background-image`, такие как `bg-grid-pattern`, можно настроить с помощью `--background-image-grid-pattern: url(…)`.

### Настройка темного режима

По умолчанию вариант `dark` в Tailwind CSS v4.0 использует медиа-запрос `prefers-color-scheme`.

Если вы хотите использовать стратегию на основе селектора в своем проекте для темного режима, переопределите вариант `dark` селектором, который вы хотите использовать:

```css
  @import "tailwindcss";
> @variant dark (&:where(.dark, .dark *));
```

### Настройка обнаружения источника

Если автоматическое обнаружение источника в Tailwind CSS v4.0 слишком широкое и включает файлы, которые вы не хотите включать (например, вы работаете в большом монорепозитории), вы можете использовать функцию `source(…)` при импорте Tailwind, чтобы указать базовый путь для автоматического обнаружения источника:

```css
@import "tailwindcss" source("../src");
```

Этот путь должен быть относительным к CSS-файлу, в котором он используется.

### Добавление источников контента

Если вам нужно добавить дополнительные источники контента, которые не выбираются по умолчанию (например, что-то, что находится в вашем файле `.gitignore`), добавьте его с помощью `@source`:


```css
  @import "tailwindcss";
> @source "../node_modules/@my-company/ui-lib/src/components";
```

В подобных ситуациях также может быть полезно экспортировать CSS-файл из вашей библиотеки и переместить туда директиву `@source`, чтобы можно было просто импортировать CSS-файл:

```css {{ filename: '/node_modules/@my-company/ui-lib/index.css' }}
@source "./src/components";
```

```css {{ filename: 'app.css' }}
@import "tailwindcss";
@import "@my-company/ui-lib";
```

Директива `@source` также может быть полезна, когда вы используете плагин Vite, но вам необходимо включить источники контента, которые не являются частью модуля, например шаблоны PHP в проекте Laravel:

```css
  @import "tailwindcss";
> @source "../../resources/views";
> @source "../../app";
```

### Отключение определения источника

Если вам по какой-либо причине необходимо отключить автоматическое определение источника, используйте `source(none)` при импорте Tailwind:

```css
@import "tailwindcss" source(none);
```

При отключенном определении источника вы можете просто использовать `@source` для явной настройки всех источников контента.

### Отключение Preflight

Если вам нужно отключить базовые стили Tailwind, вы можете импортировать нужные вам части Tailwind по отдельности:

```css
@layer theme, base, components, utilities;
@import "tailwindcss/theme" layer(theme);
@import "tailwindcss/utilities" layer(utilities);
```

### Использование префикса

Чтобы добавить префикс к вашим утилитам и переменным темы, чтобы избежать конфликтов с существующим CSS, используйте функцию `prefix(…)` при импорте Tailwind:

```css
@import "tailwindcss" prefix(tw);
```

Префиксы работают немного иначе, чем в v3 — теперь они выглядят как варианты и всегда находятся в начале имени класса:

```html
<div class="**tw:flex** **tw:bg-red-500** **tw:hover:bg-red-600**">
  <!-- ... -->
</div>
```

При использовании префикса вам все равно следует настроить переменные темы так, как будто вы не используете префикс:

```css {{ filename: "app.css" }}
@import "tailwindcss" prefix(tw);

@theme {
  --font-display: "Satoshi", "sans-serif";

  --breakpoint-3xl: 1920px;

  --color-avocado-100: oklch(0.99 0 0);
  --color-avocado-200: oklch(0.98 0.04 113.22);
  --color-avocado-300: oklch(0.94 0.11 115.03);

  /* ... */
}
```

Однако сгенерированные переменные CSS _будут_ включать префикс, чтобы избежать конфликтов с существующими переменными в вашем проекте:

```css {{ filename: "dist.css" }}
:root {
  --tw-font-display: "Satoshi", "sans-serif";

  --tw-breakpoint-3xl: 1920px;

  --tw-color-avocado-100: oklch(0.99 0 0);
  --tw-color-avocado-200: oklch(0.98 0.04 113.22);
  --tw-color-avocado-300: oklch(0.94 0.11 115.03);

  /* ... */
}
```

### Добавление пользовательских утилит

Чтобы добавить пользовательскую утилиту в v4.0, используйте новую директиву `@utility`:

```css
@import "tailwindcss";

@utility tab-4 {
  tab-size: 4;
}
```

Пользовательские утилиты автоматически вставляются в слой `utilities` вместе со всеми встроенными утилитами в фреймворке.

### Добавление пользовательских вариантов

Чтобы добавить пользовательский вариант в v4.0, используйте новую директиву `@variant`:

```css
@import "tailwindcss";

@variant pointer-coarse (@media (pointer: coarse));
@variant theme-midnight (&:where([data-theme="midnight"] *));
```

Это позволяет вам писать утилиты, такие как `pointer-coarse:size-48` и `theme-midnight:bg-slate-900`.

### Использование плагинов

Чтобы загрузить плагин в v4.0, используйте новую директиву `@plugin`:

```css
@import "tailwindcss";

@plugin "@tailwindcss/typography";
```

Директива `@plugin` принимает либо имя пакета, либо локальный путь.

### Использование устаревших файлов конфигурации

Чтобы использовать существующий файл конфигурации JS в v4.0, загрузите его с помощью директивы `@config`:

```css
@import "tailwindcss";

@config "../../tailwind.config.js";
```

Обратите внимание, что не все функции конфигурации JS поддерживаются в версии 4.0. Такие параметры, как `corePlugins`, `important` и `separator`, скорее всего, вообще не будут поддерживаться в стабильной версии v4.0, а такие параметры, как `safelist`, могут возвращаться, но с разным поведением.

### Использование \`@apply\` в Vue/Svelte

Если вы хотите использовать `@apply` в блоке `<style>` компонента Vue или Svelte, вам нужно будет импортировать конфигурацию темы, чтобы сделать эти значения доступными в этом контексте.

Чтобы сделать это без дублирования переменных CSS в выводе CSS, используйте `theme(reference)` при импорте темы:

```html
  <template>
    <h1>Hello world!</h1>
  </template>

  <style>
>   @import "../../my-theme.css" theme(reference);

    h1 {
      @apply font-bold text-2xl text-red-500;
    }
  </style>
```

Если вы используете только тему по умолчанию, вы можете импортировать `"tailwindcss/theme"` напрямую:

```html
  <template>
    <h1>Hello world!</h1>
  </template>

  <style>
>   @import "tailwindcss/theme" theme(reference);

    h1 {
      @apply font-bold text-2xl text-red-500;
    }
  </style>
```

---

## Изменения по сравнению с v3

Tailwind CSS v4.0 — это новая основная версия фреймворка, и хотя мы стремимся максимально сохранить обратную совместимость, нам пришлось внести несколько критических изменений, чтобы реализовать желаемые улучшения для нового релиза.

Чтобы сделать обновление максимально безболезненным, мы создали действительно потрясающий инструмент миграции, который автоматизирует практически все эти изменения для вас.

Чтобы автоматически обновить свой проект, запустите инструмент обновления из корневого каталога проекта в командной строке:

```bash {{ filename: 'Terminal' }}
$ npx @tailwindcss/upgrade@next
```

После этого просмотрите все изменения и протестируйте свой проект, чтобы убедиться, что все работает так, как ожидалось, и если повезет, вы сможете приступить к гонкам.

Но вот список всех изменений в деталях на случай, если у вас возникнут проблемы с использованием инструмента миграции.

### Изменения зависимостей

#### Использование PostCSS

В Tailwind CSS v3 пакет `tailwindcss` был плагином PostCSS, но в v4.0 плагин PostCSS находится в выделенном пакете `@tailwindcss/postcss`.

Tailwind CSS v4.0 также обрабатывает импорт CSS и вендорные префиксы для вас, поэтому вы можете удалить `postcss-import` и `autoprefixer`, если они есть в вашем проекте:

```diff-js {{ filename: 'postcss.config.mjs' }}
  export default {
    plugins: {
-     'postcss-import': {},
-     'tailwindcss': {},
-     'autoprefixer': {},
+     '@tailwindcss/postcss': {},
    },
  };
```

#### Использование Vite

Если вы используете Vite, мы рекомендуем перейти с плагина PostCSS на [наш новый специализированный плагин Vite](#installing-with-vite):

```ts {{ filename: 'vite.config.ts' }}
  import { defineConfig } from 'vite';
> import tailwindcss from '@tailwindcss/vite';

  export default defineConfig({
    plugins: [
>     tailwindcss()
    ],
  });
```

#### Использование Tailwind CLI

В версии 4.0 Tailwind CLI находится в выделенном пакете `@tailwindcss/cli`. Обновите любую из ваших команд сборки, чтобы использовать новый пакет:

```diff-bash
- npx tailwindcss -i input.css -o output.css
+ npx @tailwindcss/cli -i input.css -o output.css
```

### Удалены директивы \`@tailwind\`

В Tailwind CSS v4.0 вы импортируете Tailwind с помощью обычного оператора CSS `@import`, а не с помощью директив `@tailwind`, которые вы использовали в v3:

```diff-css
- @tailwind base;
- @tailwind components;
- @tailwind utilities;
+ @import "tailwindcss";
```

### Удалены устаревшие утилиты

Мы удалили все утилиты, которые были устаревшими в v3 и не были документированы в течение нескольких лет. Вот список того, что было удалено вместе с современной альтернативой:

| Устарело | Заменено |
| --- | --- |
| <code className="whitespace-nowrap">bg-opacity-*</code> | Используйте модификаторы непрозрачности, например `bg-black/50` |
| <code className="whitespace-nowrap">text-opacity-*</code> | Используйте модификаторы непрозрачности, например `text-black/50` |
| <code className="whitespace-nowrap">border-opacity-*</code> | Используйте модификаторы непрозрачности, например `border-black/50` |
| <code className="whitespace-nowrap">divide-opacity-*</code> | Используйте модификаторы непрозрачности, например `divide-black/50` |
| <code className="whitespace-nowrap">ring-opacity-*</code> | Используйте модификаторы непрозрачности, например `ring-black/50` |
| <code className="whitespace-nowrap">placeholder-opacity-*</code> | Используйте модификаторы непрозрачности, например `placeholder-black/50` |
| <code className="whitespace-nowrap">flex-shrink-*</code> | `shrink-*` |
| <code className="whitespace-nowrap">flex-grow-*</code> | `grow-*` |
| <code className="whitespace-nowrap">overflow-ellipsis</code> | `text-ellipsis` |
| <code className="whitespace-nowrap">decoration-slice</code> | `box-decoration-slice` |
| <code className="whitespace-nowrap">decoration-clone</code> | `box-decoration-clone` |

### Настройка утилиты \`container\`

В v3 утилита `container` имела несколько параметров конфигурации, таких как `center` и `padding`, которые больше не существуют в v4.0. Чтобы настроить утилиту `container` в v4.0, расширьте ее с помощью `@utility`:

```css
@import "tailwindcss";

@utility container {
  margin-inline: auto;
  padding-inline: 2rem;
}
```

### Изменения в масштабе тени по умолчанию

Мы немного изменили шкалу тени по умолчанию, чтобы убедиться, что каждая утилита тени имеет именованное значение.

Для этого мы переименовали `shadow` в `shadow-sm`, `shadow-sm` в `shadow-xs`, `drop-shadow` в `drop-shadow-sm` и `drop-shadow-sm` в `drop-shadow-xs`:

| v3                | v4           |
| ----------------- | ------------------ |
| `shadow-sm`       | `shadow-xs`        |
| `shadow`          | `shadow-sm`        |
| `drop-shadow-sm`       | `drop-shadow-xs`        |
| `drop-shadow`          | `drop-shadow-sm`        |

Утилиты `shadow` и `drop-shadow` по-прежнему будут работать для обратной совместимости, но `shadow-sm` и `drop-shadow-sm` будут выглядеть по-другому в вашем проекте, если вы не замените каждый экземпляр на `shadow-xs` и `drop-shadow-xs`.

### Изменения масштаба размытия по умолчанию

Мы немного изменили масштаб размытия по умолчанию, чтобы убедиться, что у каждой утилиты размытия есть именованное значение.

Для этого мы переименовали `blur` в `blur-sm`, а `blur-sm` в `blur-xs`:

| v3                | v4           |
| ----------------- | ------------------ |
| `blur-sm`       | `blur-xs`        |
| `blur`          | `blur-sm`        |

Утилита `blur` по-прежнему будет работать для обратной совместимости, но `blur-sm` будет выглядеть по-другому в вашем проекте, если вы не замените каждый экземпляр на `blur-xs`.

### Изменения шкалы радиуса по умолчанию

Мы немного изменили шкалу радиуса границы по умолчанию, чтобы убедиться, что каждая утилита радиуса границы имеет именованное значение.

Для этого мы переименовали `rounded` в `rounded-sm`, а `rounded-sm` в `rounded-xs`:

| v3                | v4           |
| ----------------- | ------------------ |
| `rounded-sm`       | `rounded-xs`        |
| `rounded`          | `rounded-sm`        |

Утилита `rounded` по-прежнему будет работать для обратной совместимости, но `rounded-sm` будет выглядеть по-другому в вашем проекте, если вы не замените каждый экземпляр на `rounded-xs`.

### Изменение цвета рамки по умолчанию

В v3 рамки использовали ваш настроенный цвет `gray-200` по умолчанию. Мы обновили его в v4, чтобы он был просто `currentColor`, что соответствует поведению по умолчанию всех браузеров.

Чтобы обновить свой проект для этого изменения, убедитесь, что везде, где вы используете утилиту цвета рамки, везде, где вы используете утилиту `border`, или добавьте эти строки CSS в свой проект, чтобы сохранить поведение v3:

```css
  @import "tailwindcss";

> @layer base {
>   *,
>   ::after,
>   ::before,
>   ::backdrop,
>   ::file-selector-button {
>     border-color: var(--color-gray-200, currentColor);
>   }
> }
```

### Изменение ширины кольца по умолчанию

В v3 утилита `ring` добавила кольцо размером 3 пикселя. В v4 мы изменили его на 1 пиксель, чтобы он соответствовал границам и контурам.

Чтобы обновить проект для этого изменения, замените любое использование `ring` на `ring-3`:

```diff-html
- <div class="**ring** ring-blue-500">
+ <div class="**ring-3** ring-blue-500">
    <!-- ... -->
  </div>
```

### Изменение заполнителя по умолчанию

В v3 текст заполнителя по умолчанию использовал ваш настроенный цвет `gray-400`. Мы упростили это в v4, чтобы просто использовать текущий цвет текста с непрозрачностью 50%.

Вы, вероятно, даже не заметите этого изменения (возможно, оно даже улучшит внешний вид вашего проекта), но если вы хотите сохранить поведение v3, добавьте этот CSS в свой проект:

```css
  @import "tailwindcss";

> @layer base {
>   input::placeholder,
>   textarea::placeholder {
>     color: theme(--color-gray-400);
>   }
> }
```

### \`outline-none\` в \`outline-hidden\`

В v3 утилита `outline-none` на самом деле была сложным классом, который не просто устанавливал `outline-style: none`:

```css
/* v3 */
.outline-none {
  outline: 2px solid transparent;
  outline-offset: 2px;
}
```

На самом деле он добавил невидимый контур в 2 пикселя, который все равно будет отображаться в режиме принудительных цветов по соображениям доступности.

Мы упростили это в версии 4.0, и теперь `outline-none` просто устанавливает `outline-style: none`, как и ожидалось:

```css
/* v4 */
.outline-none {
  outline-style: none;
}
```

Мы добавили новую утилиту `outline-hidden`, которая делает то же, что `outline-none` делала в v3, поскольку это все еще очень полезная функция.

Чтобы обновить свой проект для этого изменения, замените любое использование `outline-none` на `outline-hidden`, если только вы действительно не хотите `outline-style: none`:

```diff-html
- <input class="**focus:outline-none**">
+ <input class="**focus:outline-hidden**">
```

### Добавление пользовательских утилит

В v3 любые пользовательские классы, которые вы определили в `@layer utilities`, будут подхвачены Tailwind как настоящий класс утилит и будут автоматически работать с такими вариантами, как `hover`, `focus` или `lg`.

В v4.0 мы используем собственные каскадные слои и больше не перехватываем правило `@layer`, поэтому мы ввели API `@utility` в качестве замены:

```diff-css
- @layer utilities {
-   .tab-4 {
-     tab-size: 4;
-   }
- }
+ @utility tab-4 {
+   tab-size: 4;
+ }
```

Пользовательские утилиты должны быть одним именем класса в v4.0, а не сложным селектором. Если ваша пользовательская утилита сложнее, чем одно имя класса, используйте вложение для определения утилиты:

```css
@utility scrollbar-hidden {
  &::-webkit-scrollbar {
    display: none;
  }
}
```

### Размещение вариантов, чувствительных к порядку

В версии 3 варианты, расположенные в стопке, применялись справа налево, но в версии 4 мы обновили их, чтобы они применялись слева направо, чтобы больше походить на синтаксис CSS.

Чтобы обновить свой проект для этого изменения, измените порядок любых вариантов, чувствительных к порядку, в своем проекте:

```diff-html
- <ul class="py-4 first:*:pt-0 last:*:pb-0">
+ <ul class="py-4 *:first:pt-0 *:last:pb-0">
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
  </ul>
```

У вас, скорее всего, их очень мало, если они вообще есть — скорее всего, вы используете прямой дочерний вариант (`*`) и любые варианты плагинов типографики (`prose-headings`), и даже в этом случае это только если вы совмещаете их с другими вариантами.

### Переменные CSS в произвольных значениях

В v3 вы могли использовать переменные CSS как произвольные значения без `var(…)`, но недавние обновления CSS означают, что это часто может быть неоднозначно, поэтому мы изменили синтаксис для этого в v4.0, чтобы использовать круглые скобки вместо квадратных.

Чтобы обновить свой проект для этого изменения, замените использование старого сокращенного синтаксиса переменных на новый сокращенный синтаксис переменных:

```diff-html
- <div class="**bg-[--brand-color]**">
+ <div class="**bg-(--brand-color)**">
    <!-- ... -->
  </div>
```

### Ссылка на значения темы в JS

В v3 мы экспортировали функцию `resolveConfig`, которую можно использовать для преобразования конфигурации JS в плоский объект, который можно использовать в других JavaScript.

Мы удалили это в v4 в надежде, что люди смогут использовать переменные CSS, которые мы генерируем напрямую, что намного проще и значительно уменьшит размер вашего пакета.

### Стили наведения игнорируются на мобильных устройствах

В v4.0 мы обновили вариант `hover`, чтобы он применялся только тогда, когда основное устройство ввода поддерживает наведение:

```css
@media (hover: hover) {
  .hover\:underline:hover {
    text-decoration: underline;
  }
}
```

Это может создать проблемы, если вы создали свой сайт таким образом, что он зависит от сенсорных устройств, которые вызывают наведение при нажатии. Если для вас это проблема, вы можете переопределить вариант `hover` своим собственным вариантом, который использует старую реализацию:

```css
@import "tailwindcss";

@variant hover (&:hover);
```

В целом я бы рекомендовал рассматривать функциональность наведения как улучшение и не полагаться на нее для работы вашего сайта, поскольку сенсорные устройства на самом деле не имеют возможности наведения.

### Основные плагины нельзя отключить

В v3 была опция `corePlugins`, которую можно было использовать для полного отключения определенных утилит в фреймворке. Это больше не поддерживается в v4.0, но мы планируем изучить другие идеи для решения тех же проблем, для решения которых эта функция часто использовалась в более поздних бета-выпусках.

### Использование функции \`theme()\`

Поскольку Tailwind CSS v4.0 включает переменные CSS для всех значений вашей темы, мы рекомендуем использовать эти переменные вместо функции `theme()`, когда это возможно:


```diff-css
  @import "tailwindcss";

  .my-class {
-   background-color: theme(colors.red.500);
+   background-color: var(--color-red-500);
  }
```

В случаях, когда вам все еще необходимо использовать функцию `theme()` (например, в медиазапросах, где переменные CSS не поддерживаются), следует использовать имя переменной CSS вместо старой точечной нотации:

```diff-css
  @import "tailwindcss";

- @media (width >= theme(screens.xl)) {
+ @media (width >= theme(--breakpoint-xl)) {
    /* ... */
  }
```

### Использование файла конфигурации JavaScript

Файлы конфигурации JavaScript по-прежнему поддерживаются для обратной совместимости, но они больше не определяются автоматически в v4.0.

Если вам по-прежнему необходимо использовать файл конфигурации JavaScript, обязательно загрузите его явно с помощью `@config`:

```css
@import "tailwindcss";
@config "../../tailwind.config.js";
```
